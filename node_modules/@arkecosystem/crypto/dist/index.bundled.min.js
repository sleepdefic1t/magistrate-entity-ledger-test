import{secp256k1 as t,RIPEMD160 as e,SHA1 as r,SHA256 as n,Hash160 as i,Hash256 as o}from"bcrypto";import a from"browserify-aes";import{Address as s,Keys as u,PrivateKey as c,PublicKey as f,WIF as p}from"@arkecosystem/crypto-identities";import l from"deepmerge";import h from"lodash.get";import d from"lodash.set";import*as y from"@arkecosystem/crypto-networks";import{devnet as g}from"@arkecosystem/crypto-networks";import{base58 as m}from"bstring";import v from"fast-memoize";import{fromSeed as b,fromPrivateKey as w}from"bip32";import{mnemonicToSeedSync as S}from"bip39";import E from"dayjs";import{BigNumber as A}from"@arkecosystem/utils";import{parse as x,process as k}from"ipaddr.js";import O from"ajv";import P from"ajv-keywords";import T from"bytebuffer";var B="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},I=[],j=[],U="undefined"!=typeof Uint8Array?Uint8Array:Array,M=!1;function R(){M=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)I[e]=t[e],j[t.charCodeAt(e)]=e;j["-".charCodeAt(0)]=62,j["_".charCodeAt(0)]=63}function F(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(I[(i=n)>>18&63]+I[i>>12&63]+I[i>>6&63]+I[63&i]);return o.join("")}function C(t){var e;M||R();for(var r=t.length,n=r%3,i="",o=[],a=0,s=r-n;a<s;a+=16383)o.push(F(t,a,a+16383>s?s:a+16383));return 1===n?(e=t[r-1],i+=I[e>>2],i+=I[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=I[e>>10],i+=I[e>>4&63],i+=I[e<<2&63],i+="="),o.push(i),o.join("")}function _(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,f=-7,p=r?i-1:0,l=r?-1:1,h=t[e+p];for(p+=l,o=h&(1<<-f)-1,h>>=-f,f+=s;f>0;o=256*o+t[e+p],p+=l,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+t[e+p],p+=l,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=c}return(h?-1:1)*a*Math.pow(2,o-n)}function z(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,p=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+p>=1?l/u:l*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=f?(s=0,a=f):a+p>=1?(s=(e*u-1)*Math.pow(2,i),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[r+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+h]=255&a,h+=d,a/=256,c-=8);t[r+h-d]|=128*y}var L={}.toString,N=Array.isArray||function(t){return"[object Array]"==L.call(t)};function D(){return H.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function K(t,e){if(D()<e)throw new RangeError("Invalid typed array length");return H.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=H.prototype:(null===t&&(t=new H(e)),t.length=e),t}function H(t,e,r){if(!(H.TYPED_ARRAY_SUPPORT||this instanceof H))return new H(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return G(this,t)}return q(this,t,e,r)}function q(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);H.TYPED_ARRAY_SUPPORT?(t=e).__proto__=H.prototype:t=V(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!H.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Z(e,r),i=(t=K(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(Y(e)){var r=0|W(e.length);return 0===(t=K(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?K(t,0):V(t,e);if("Buffer"===e.type&&N(e.data))return V(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function $(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function G(t,e){if($(e),t=K(t,e<0?0:0|W(e)),!H.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function V(t,e){var r=e.length<0?0:0|W(e.length);t=K(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function W(t){if(t>=D())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+D().toString(16)+" bytes");return 0|t}function Y(t){return!(null==t||!t._isBuffer)}function Z(t,e){if(Y(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Et(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return At(t).length;default:if(n)return Et(t).length;e=(""+e).toLowerCase(),n=!0}}function J(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return pt(this,e,r);case"utf8":case"utf-8":return ut(this,e,r);case"ascii":return ct(this,e,r);case"latin1":case"binary":return ft(this,e,r);case"base64":return st(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lt(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function X(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Q(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=H.from(e,n)),Y(e))return 0===e.length?-1:tt(t,e,r,n,i);if("number"==typeof e)return e&=255,H.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):tt(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function tt(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var f=-1;for(o=r;o<s;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*a}else-1!==f&&(o-=o-f),f=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var p=!0,l=0;l<u;l++)if(c(t,o+l)!==c(e,l)){p=!1;break}if(p)return o}return-1}function et(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function rt(t,e,r,n){return xt(Et(e,t.length-r),t,r,n)}function nt(t,e,r,n){return xt(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function it(t,e,r,n){return nt(t,e,r,n)}function ot(t,e,r,n){return xt(At(e),t,r,n)}function at(t,e,r,n){return xt(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function st(t,e,r){return 0===e&&r===t.length?C(t):C(t.slice(e,r))}function ut(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,c=t[i],f=null,p=c>239?4:c>223?3:c>191?2:1;if(i+p<=r)switch(p){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(f=u)}null===f?(f=65533,p=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=p}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}H.TYPED_ARRAY_SUPPORT=void 0===B.TYPED_ARRAY_SUPPORT||B.TYPED_ARRAY_SUPPORT,H.poolSize=8192,H._augment=function(t){return t.__proto__=H.prototype,t},H.from=function(t,e,r){return q(null,t,e,r)},H.TYPED_ARRAY_SUPPORT&&(H.prototype.__proto__=Uint8Array.prototype,H.__proto__=Uint8Array),H.alloc=function(t,e,r){return function(t,e,r,n){return $(e),e<=0?K(t,e):void 0!==r?"string"==typeof n?K(t,e).fill(r,n):K(t,e).fill(r):K(t,e)}(null,t,e,r)},H.allocUnsafe=function(t){return G(null,t)},H.allocUnsafeSlow=function(t){return G(null,t)},H.isBuffer=function(t){return null!=t&&(!!t._isBuffer||kt(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&kt(t.slice(0,0))}(t))},H.compare=function(t,e){if(!Y(t)||!Y(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},H.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},H.concat=function(t,e){if(!N(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return H.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=H.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!Y(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},H.byteLength=Z,H.prototype._isBuffer=!0,H.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)X(this,e,e+1);return this},H.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)X(this,e,e+3),X(this,e+1,e+2);return this},H.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)X(this,e,e+7),X(this,e+1,e+6),X(this,e+2,e+5),X(this,e+3,e+4);return this},H.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?ut(this,0,t):J.apply(this,arguments)},H.prototype.equals=function(t){if(!Y(t))throw new TypeError("Argument must be a Buffer");return this===t||0===H.compare(this,t)},H.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},H.prototype.compare=function(t,e,r,n,i){if(!Y(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(n,i),c=t.slice(e,r),f=0;f<s;++f)if(u[f]!==c[f]){o=u[f],a=c[f];break}return o<a?-1:a<o?1:0},H.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},H.prototype.indexOf=function(t,e,r){return Q(this,t,e,r,!0)},H.prototype.lastIndexOf=function(t,e,r){return Q(this,t,e,r,!1)},H.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return et(this,t,e,r);case"utf8":case"utf-8":return rt(this,t,e,r);case"ascii":return nt(this,t,e,r);case"latin1":case"binary":return it(this,t,e,r);case"base64":return ot(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},H.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ct(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function ft(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function pt(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=St(t[o]);return i}function lt(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function ht(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function dt(t,e,r,n,i,o){if(!Y(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function yt(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function gt(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function mt(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function vt(t,e,r,n,i){return i||mt(t,0,r,4),z(t,e,r,n,23,4),r+4}function bt(t,e,r,n,i){return i||mt(t,0,r,8),z(t,e,r,n,52,8),r+8}H.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),H.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=H.prototype;else{var i=e-t;r=new H(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},H.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||ht(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},H.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||ht(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},H.prototype.readUInt8=function(t,e){return e||ht(t,1,this.length),this[t]},H.prototype.readUInt16LE=function(t,e){return e||ht(t,2,this.length),this[t]|this[t+1]<<8},H.prototype.readUInt16BE=function(t,e){return e||ht(t,2,this.length),this[t]<<8|this[t+1]},H.prototype.readUInt32LE=function(t,e){return e||ht(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},H.prototype.readUInt32BE=function(t,e){return e||ht(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},H.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||ht(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},H.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||ht(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},H.prototype.readInt8=function(t,e){return e||ht(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},H.prototype.readInt16LE=function(t,e){e||ht(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},H.prototype.readInt16BE=function(t,e){e||ht(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},H.prototype.readInt32LE=function(t,e){return e||ht(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},H.prototype.readInt32BE=function(t,e){return e||ht(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},H.prototype.readFloatLE=function(t,e){return e||ht(t,4,this.length),_(this,t,!0,23,4)},H.prototype.readFloatBE=function(t,e){return e||ht(t,4,this.length),_(this,t,!1,23,4)},H.prototype.readDoubleLE=function(t,e){return e||ht(t,8,this.length),_(this,t,!0,52,8)},H.prototype.readDoubleBE=function(t,e){return e||ht(t,8,this.length),_(this,t,!1,52,8)},H.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||dt(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},H.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||dt(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},H.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,1,255,0),H.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},H.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,2,65535,0),H.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):yt(this,t,e,!0),e+2},H.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,2,65535,0),H.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):yt(this,t,e,!1),e+2},H.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,4,4294967295,0),H.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):gt(this,t,e,!0),e+4},H.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,4,4294967295,0),H.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):gt(this,t,e,!1),e+4},H.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);dt(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},H.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);dt(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},H.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,1,127,-128),H.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},H.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,2,32767,-32768),H.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):yt(this,t,e,!0),e+2},H.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,2,32767,-32768),H.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):yt(this,t,e,!1),e+2},H.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,4,2147483647,-2147483648),H.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):gt(this,t,e,!0),e+4},H.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||dt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),H.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):gt(this,t,e,!1),e+4},H.prototype.writeFloatLE=function(t,e,r){return vt(this,t,e,!0,r)},H.prototype.writeFloatBE=function(t,e,r){return vt(this,t,e,!1,r)},H.prototype.writeDoubleLE=function(t,e,r){return bt(this,t,e,!0,r)},H.prototype.writeDoubleBE=function(t,e,r){return bt(this,t,e,!1,r)},H.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!H.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},H.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!H.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=Y(t)?t:Et(new H(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var wt=/[^+\/0-9A-Za-z-_]/g;function St(t){return t<16?"0"+t.toString(16):t.toString(16)}function Et(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function At(t){return function(t){var e,r,n,i,o,a;M||R();var s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[s-2]?2:"="===t[s-1]?1:0,a=new U(3*s/4-o),n=o>0?s-4:s;var u=0;for(e=0,r=0;e<n;e+=4,r+=3)i=j[t.charCodeAt(e)]<<18|j[t.charCodeAt(e+1)]<<12|j[t.charCodeAt(e+2)]<<6|j[t.charCodeAt(e+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=j[t.charCodeAt(e)]<<2|j[t.charCodeAt(e+1)]>>4,a[u++]=255&i):1===o&&(i=j[t.charCodeAt(e)]<<10|j[t.charCodeAt(e+1)]<<4|j[t.charCodeAt(e+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(wt,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function xt(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function kt(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Pt(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}for(var Tt=function(t){var e=_t(t),r=e[0],n=e[1];return 3*(r+n)/4-n},Bt=function(t){var e,r,n=_t(t),i=n[0],o=n[1],a=new Mt(function(t,e,r){return 3*(e+r)/4-r}(0,i,o)),s=0,u=o>0?i-4:i;for(r=0;r<u;r+=4)e=Ut[t.charCodeAt(r)]<<18|Ut[t.charCodeAt(r+1)]<<12|Ut[t.charCodeAt(r+2)]<<6|Ut[t.charCodeAt(r+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=255&e;2===o&&(e=Ut[t.charCodeAt(r)]<<2|Ut[t.charCodeAt(r+1)]>>4,a[s++]=255&e);1===o&&(e=Ut[t.charCodeAt(r)]<<10|Ut[t.charCodeAt(r+1)]<<4|Ut[t.charCodeAt(r+2)]>>2,a[s++]=e>>8&255,a[s++]=255&e);return a},It=function(t){for(var e,r=t.length,n=r%3,i=[],o=0,a=r-n;o<a;o+=16383)i.push(zt(t,o,o+16383>a?a:o+16383));1===n?(e=t[r-1],i.push(jt[e>>2]+jt[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(jt[e>>10]+jt[e>>4&63]+jt[e<<2&63]+"="));return i.join("")},jt=[],Ut=[],Mt="undefined"!=typeof Uint8Array?Uint8Array:Array,Rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ft=0,Ct=Rt.length;Ft<Ct;++Ft)jt[Ft]=Rt[Ft],Ut[Rt.charCodeAt(Ft)]=Ft;function _t(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function zt(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(jt[(i=n)>>18&63]+jt[i>>12&63]+jt[i>>6&63]+jt[63&i]);return o.join("")}Ut["-".charCodeAt(0)]=62,Ut["_".charCodeAt(0)]=63;var Lt={byteLength:Tt,toByteArray:Bt,fromByteArray:It},Nt=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,f=-7,p=r?i-1:0,l=r?-1:1,h=t[e+p];for(p+=l,o=h&(1<<-f)-1,h>>=-f,f+=s;f>0;o=256*o+t[e+p],p+=l,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+t[e+p],p+=l,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=c}return(h?-1:1)*a*Math.pow(2,o-n)},Dt=function(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,p=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+p>=1?l/u:l*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=f?(s=0,a=f):a+p>=1?(s=(e*u-1)*Math.pow(2,i),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[r+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+h]=255&a,h+=d,a/=256,c-=8);t[r+h-d]|=128*y},Kt=Pt((function(t,e){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=i,e.SlowBuffer=function(t){+t!=t&&(t=0);return i.alloc(+t)},e.INSPECT_MAX_BYTES=50;function n(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,i.prototype),e}function i(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return s(t)}return o(t,e,r)}function o(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|f(t,e),o=n(r),a=o.write(t,e);a!==r&&(o=o.slice(0,a));return o}(t,e);if(ArrayBuffer.isView(t))return u(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(C(t,ArrayBuffer)||t&&C(t.buffer,ArrayBuffer))return function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return Object.setPrototypeOf(n,i.prototype),n}(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=t.valueOf&&t.valueOf();if(null!=o&&o!==t)return i.from(o,e,r);var a=function(t){if(i.isBuffer(t)){var e=0|c(t.length),r=n(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||_(t.length)?n(0):u(t);if("Buffer"===t.type&&Array.isArray(t.data))return u(t.data)}(t);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return i.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function s(t){return a(t),n(t<0?0:0|c(t))}function u(t){for(var e=t.length<0?0:0|c(t.length),r=n(e),i=0;i<e;i+=1)r[i]=255&t[i];return r}function c(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function f(t,e){if(i.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||C(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return R(t).length;default:if(o)return n?-1:M(t).length;e=(""+e).toLowerCase(),o=!0}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return A(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function l(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function h(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),_(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=i.from(e,n)),i.isBuffer(e))return 0===e.length?-1:d(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):d(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function d(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var f=-1;for(o=r;o<s;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*a}else-1!==f&&(o-=o-f),f=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var p=!0,l=0;l<u;l++)if(c(t,o+l)!==c(e,l)){p=!1;break}if(p)return o}return-1}function y(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(_(s))return a;t[r+a]=s}return a}function g(t,e,r,n){return F(M(e,t.length-r),t,r,n)}function m(t,e,r,n){return F(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function v(t,e,r,n){return m(t,e,r,n)}function b(t,e,r,n){return F(R(e),t,r,n)}function w(t,e,r,n){return F(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?Lt.fromByteArray(t):Lt.fromByteArray(t.slice(e,r))}function E(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,c=t[i],f=null,p=c>239?4:c>223?3:c>191?2:1;if(i+p<=r)switch(p){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(f=u)}null===f?(f=65533,p=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=p}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.kMaxLength=2147483647,i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,r){return o(t,e,r)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(t,e,r){return function(t,e,r){return a(t),t<=0?n(t):void 0!==e?"string"==typeof r?n(t).fill(e,r):n(t).fill(e):n(t)}(t,e,r)},i.allocUnsafe=function(t){return s(t)},i.allocUnsafeSlow=function(t){return s(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==i.prototype},i.compare=function(t,e){if(C(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),C(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,o=0,a=Math.min(r,n);o<a;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=i.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var a=t[r];if(C(a,Uint8Array)&&(a=i.from(a)),!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},i.byteLength=f,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)l(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)l(this,e,e+3),l(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)l(this,e,e+7),l(this,e+1,e+6),l(this,e+2,e+5),l(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(t,e,r,n,o){if(C(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var a=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),u=Math.min(a,s),c=this.slice(n,o),f=t.slice(e,r),p=0;p<u;++p)if(c[p]!==f[p]){a=c[p],s=f[p];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},i.prototype.indexOf=function(t,e,r){return h(this,t,e,r,!0)},i.prototype.lastIndexOf=function(t,e,r){return h(this,t,e,r,!1)},i.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,t,e,r);case"utf8":case"utf-8":return g(this,t,e,r);case"ascii":return m(this,t,e,r);case"latin1":case"binary":return v(this,t,e,r);case"base64":return b(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function x(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function k(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=z[t[o]];return i}function O(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,r,n,o,a){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function B(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(t,e,r,n,i){return e=+e,r>>>=0,i||B(t,0,r,4),Dt(t,e,r,n,23,4),r+4}function j(t,e,r,n,i){return e=+e,r>>>=0,i||B(t,0,r,8),Dt(t,e,r,n,52,8),r+8}i.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,i.prototype),n},i.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},i.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},i.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},i.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},i.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),Nt(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),Nt(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),Nt(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),Nt(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||T(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},i.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||T(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},i.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);T(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},i.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);T(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},i.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,r){return I(this,t,e,!0,r)},i.prototype.writeFloatBE=function(t,e,r){return I(this,t,e,!1,r)},i.prototype.writeDoubleLE=function(t,e,r){return j(this,t,e,!0,r)},i.prototype.writeDoubleBE=function(t,e,r){return j(this,t,e,!1,r)},i.prototype.copy=function(t,e,r,n){if(!i.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var a=o-1;a>=0;--a)t[a+e]=this[a+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return o},i.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var o=t.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(t=o)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var s=i.isBuffer(t)?t:i.from(t,n),u=s.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<r-e;++a)this[a+e]=s[a%u]}return this};var U=/[^+/0-9A-Za-z-_]/g;function M(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function R(t){return Lt.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function C(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function _(t){return t!=t}var z=function(){for(var t=new Array(256),e=0;e<16;++e)for(var r=16*e,n=0;n<16;++n)t[r+n]="0123456789abcdef"[e]+"0123456789abcdef"[n];return t}()}));function Ht(){throw new Error("setTimeout has not been defined")}function qt(){throw new Error("clearTimeout has not been defined")}var $t=Ht,Gt=qt;function Vt(t){if($t===setTimeout)return setTimeout(t,0);if(($t===Ht||!$t)&&setTimeout)return $t=setTimeout,setTimeout(t,0);try{return $t(t,0)}catch(e){try{return $t.call(null,t,0)}catch(e){return $t.call(this,t,0)}}}"function"==typeof B.setTimeout&&($t=setTimeout),"function"==typeof B.clearTimeout&&(Gt=clearTimeout);var Wt,Yt=[],Zt=!1,Jt=-1;function Xt(){Zt&&Wt&&(Zt=!1,Wt.length?Yt=Wt.concat(Yt):Jt=-1,Yt.length&&Qt())}function Qt(){if(!Zt){var t=Vt(Xt);Zt=!0;for(var e=Yt.length;e;){for(Wt=Yt,Yt=[];++Jt<e;)Wt&&Wt[Jt].run();Jt=-1,e=Yt.length}Wt=null,Zt=!1,function(t){if(Gt===clearTimeout)return clearTimeout(t);if((Gt===qt||!Gt)&&clearTimeout)return Gt=clearTimeout,clearTimeout(t);try{Gt(t)}catch(e){try{return Gt.call(null,t)}catch(e){return Gt.call(this,t)}}}(t)}}function te(t,e){this.fun=t,this.array=e}te.prototype.run=function(){this.fun.apply(null,this.array)};function ee(){}var re=ee,ne=ee,ie=ee,oe=ee,ae=ee,se=ee,ue=ee;var ce=B.performance||{},fe=ce.now||ce.mozNow||ce.msNow||ce.oNow||ce.webkitNow||function(){return(new Date).getTime()};var pe=new Date;var le={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Yt.push(new te(t,e)),1!==Yt.length||Zt||Vt(Qt)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:re,addListener:ne,once:ie,off:oe,removeListener:ae,removeAllListeners:se,emit:ue,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*fe.call(ce),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-pe)/1e3}},he=Pt((function(t){var e=function(t){var r=1e7,n=9007199254740992,i=p(n),o="function"==typeof BigInt;function a(t,e,r,n){return void 0===t?a[0]:void 0!==e&&(10!=+e||r)?N(t,e,r,n):$(t)}function s(t,e){this.value=t,this.sign=e,this.isSmall=!1}function u(t){this.value=t,this.sign=t<0,this.isSmall=!0}function c(t){this.value=t}function f(t){return-n<t&&t<n}function p(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function l(t){h(t);var e=t.length;if(e<4&&T(t,i)<0)switch(e){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*r;default:return t[0]+(t[1]+t[2]*r)*r}return t}function h(t){for(var e=t.length;0===t[--e];);t.length=e+1}function d(t){for(var e=new Array(t),r=-1;++r<t;)e[r]=0;return e}function y(t){return t>0?Math.floor(t):Math.ceil(t)}function g(t,e){var n,i,o=t.length,a=e.length,s=new Array(o),u=0,c=r;for(i=0;i<a;i++)u=(n=t[i]+e[i]+u)>=c?1:0,s[i]=n-u*c;for(;i<o;)u=(n=t[i]+u)===c?1:0,s[i++]=n-u*c;return u>0&&s.push(u),s}function m(t,e){return t.length>=e.length?g(t,e):g(e,t)}function v(t,e){var n,i,o=t.length,a=new Array(o),s=r;for(i=0;i<o;i++)n=t[i]-s+e,e=Math.floor(n/s),a[i]=n-e*s,e+=1;for(;e>0;)a[i++]=e%s,e=Math.floor(e/s);return a}function b(t,e){var r,n,i=t.length,o=e.length,a=new Array(i),s=0;for(r=0;r<o;r++)(n=t[r]-s-e[r])<0?(n+=1e7,s=1):s=0,a[r]=n;for(r=o;r<i;r++){if(!((n=t[r]-s)<0)){a[r++]=n;break}n+=1e7,a[r]=n}for(;r<i;r++)a[r]=t[r];return h(a),a}function w(t,e,r){var n,i,o=t.length,a=new Array(o),c=-e;for(n=0;n<o;n++)i=t[n]+c,c=Math.floor(i/1e7),i%=1e7,a[n]=i<0?i+1e7:i;return"number"==typeof(a=l(a))?(r&&(a=-a),new u(a)):new s(a,r)}function S(t,e){var r,n,i,o,a=t.length,s=e.length,u=d(a+s);for(i=0;i<a;++i){o=t[i];for(var c=0;c<s;++c)r=o*e[c]+u[i+c],n=Math.floor(r/1e7),u[i+c]=r-1e7*n,u[i+c+1]+=n}return h(u),u}function E(t,e){var n,i,o=t.length,a=new Array(o),s=r,u=0;for(i=0;i<o;i++)n=t[i]*e+u,u=Math.floor(n/s),a[i]=n-u*s;for(;u>0;)a[i++]=u%s,u=Math.floor(u/s);return a}function A(t,e){for(var r=[];e-- >0;)r.push(0);return r.concat(t)}function x(t,e,n){return new s(t<r?E(e,t):S(e,p(t)),n)}function k(t){var e,r,n,i,o=t.length,a=d(o+o);for(n=0;n<o;n++){r=0-(i=t[n])*i;for(var s=n;s<o;s++)e=i*t[s]*2+a[n+s]+r,r=Math.floor(e/1e7),a[n+s]=e-1e7*r;a[n+o]=r}return h(a),a}function O(t,e){var r,n,i,o,a=t.length,s=d(a);for(i=0,r=a-1;r>=0;--r)i=(o=1e7*i+t[r])-(n=y(o/e))*e,s[r]=0|n;return[s,0|i]}function P(t,e){var n,i=$(e);if(o)return[new c(t.value/i.value),new c(t.value%i.value)];var f,g=t.value,m=i.value;if(0===m)throw new Error("Cannot divide by zero");if(t.isSmall)return i.isSmall?[new u(y(g/m)),new u(g%m)]:[a[0],t];if(i.isSmall){if(1===m)return[t,a[0]];if(-1==m)return[t.negate(),a[0]];var v=Math.abs(m);if(v<r){f=l((n=O(g,v))[0]);var w=n[1];return t.sign&&(w=-w),"number"==typeof f?(t.sign!==i.sign&&(f=-f),[new u(f),new u(w)]):[new s(f,t.sign!==i.sign),new u(w)]}m=p(v)}var S=T(g,m);if(-1===S)return[a[0],t];if(0===S)return[a[t.sign===i.sign?1:-1],a[0]];f=(n=g.length+m.length<=200?function(t,e){var n,i,o,a,s,u,c,f=t.length,p=e.length,h=r,y=d(e.length),g=e[p-1],m=Math.ceil(h/(2*g)),v=E(t,m),b=E(e,m);for(v.length<=f&&v.push(0),b.push(0),g=b[p-1],i=f-p;i>=0;i--){for(n=h-1,v[i+p]!==g&&(n=Math.floor((v[i+p]*h+v[i+p-1])/g)),o=0,a=0,u=b.length,s=0;s<u;s++)o+=n*b[s],c=Math.floor(o/h),a+=v[i+s]-(o-c*h),o=c,a<0?(v[i+s]=a+h,a=-1):(v[i+s]=a,a=0);for(;0!==a;){for(n-=1,o=0,s=0;s<u;s++)(o+=v[i+s]-h+b[s])<0?(v[i+s]=o+h,o=0):(v[i+s]=o,o=1);a+=o}y[i]=n}return v=O(v,m)[0],[l(y),l(v)]}(g,m):function(t,e){for(var r,n,i,o,a,s=t.length,u=e.length,c=[],f=[];s;)if(f.unshift(t[--s]),h(f),T(f,e)<0)c.push(0);else{i=1e7*f[(n=f.length)-1]+f[n-2],o=1e7*e[u-1]+e[u-2],n>u&&(i=1e7*(i+1)),r=Math.ceil(i/o);do{if(T(a=E(e,r),f)<=0)break;r--}while(r);c.push(r),f=b(f,a)}return c.reverse(),[l(c),l(f)]}(g,m))[0];var A=t.sign!==i.sign,x=n[1],k=t.sign;return"number"==typeof f?(A&&(f=-f),f=new u(f)):f=new s(f,A),"number"==typeof x?(k&&(x=-x),x=new u(x)):x=new s(x,k),[f,x]}function T(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var r=t.length-1;r>=0;r--)if(t[r]!==e[r])return t[r]>e[r]?1:-1;return 0}function B(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function I(t,r){for(var n,i,o,a=t.prev(),s=a,u=0;s.isEven();)s=s.divide(2),u++;t:for(i=0;i<r.length;i++)if(!t.lesser(r[i])&&!(o=e(r[i]).modPow(s,t)).isUnit()&&!o.equals(a)){for(n=u-1;0!=n;n--){if((o=o.square().mod(t)).isUnit())return!1;if(o.equals(a))continue t}return!1}return!0}s.prototype=Object.create(a.prototype),u.prototype=Object.create(a.prototype),c.prototype=Object.create(a.prototype),s.prototype.add=function(t){var e=$(t);if(this.sign!==e.sign)return this.subtract(e.negate());var r=this.value,n=e.value;return e.isSmall?new s(v(r,Math.abs(n)),this.sign):new s(m(r,n),this.sign)},s.prototype.plus=s.prototype.add,u.prototype.add=function(t){var e=$(t),r=this.value;if(r<0!==e.sign)return this.subtract(e.negate());var n=e.value;if(e.isSmall){if(f(r+n))return new u(r+n);n=p(Math.abs(n))}return new s(v(n,Math.abs(r)),r<0)},u.prototype.plus=u.prototype.add,c.prototype.add=function(t){return new c(this.value+$(t).value)},c.prototype.plus=c.prototype.add,s.prototype.subtract=function(t){var e=$(t);if(this.sign!==e.sign)return this.add(e.negate());var r=this.value,n=e.value;return e.isSmall?w(r,Math.abs(n),this.sign):function(t,e,r){var n;return T(t,e)>=0?n=b(t,e):(n=b(e,t),r=!r),"number"==typeof(n=l(n))?(r&&(n=-n),new u(n)):new s(n,r)}(r,n,this.sign)},s.prototype.minus=s.prototype.subtract,u.prototype.subtract=function(t){var e=$(t),r=this.value;if(r<0!==e.sign)return this.add(e.negate());var n=e.value;return e.isSmall?new u(r-n):w(n,Math.abs(r),r>=0)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(t){return new c(this.value-$(t).value)},c.prototype.minus=c.prototype.subtract,s.prototype.negate=function(){return new s(this.value,!this.sign)},u.prototype.negate=function(){var t=this.sign,e=new u(-this.value);return e.sign=!t,e},c.prototype.negate=function(){return new c(-this.value)},s.prototype.abs=function(){return new s(this.value,!1)},u.prototype.abs=function(){return new u(Math.abs(this.value))},c.prototype.abs=function(){return new c(this.value>=0?this.value:-this.value)},s.prototype.multiply=function(t){var e,n,i,o=$(t),u=this.value,c=o.value,f=this.sign!==o.sign;if(o.isSmall){if(0===c)return a[0];if(1===c)return this;if(-1===c)return this.negate();if((e=Math.abs(c))<r)return new s(E(u,e),f);c=p(e)}return n=u.length,i=c.length,new s(-.012*n-.012*i+15e-6*n*i>0?function t(e,r){var n=Math.max(e.length,r.length);if(n<=30)return S(e,r);n=Math.ceil(n/2);var i=e.slice(n),o=e.slice(0,n),a=r.slice(n),s=r.slice(0,n),u=t(o,s),c=t(i,a),f=t(m(o,i),m(s,a)),p=m(m(u,A(b(b(f,u),c),n)),A(c,2*n));return h(p),p}(u,c):S(u,c),f)},s.prototype.times=s.prototype.multiply,u.prototype._multiplyBySmall=function(t){return f(t.value*this.value)?new u(t.value*this.value):x(Math.abs(t.value),p(Math.abs(this.value)),this.sign!==t.sign)},s.prototype._multiplyBySmall=function(t){return 0===t.value?a[0]:1===t.value?this:-1===t.value?this.negate():x(Math.abs(t.value),this.value,this.sign!==t.sign)},u.prototype.multiply=function(t){return $(t)._multiplyBySmall(this)},u.prototype.times=u.prototype.multiply,c.prototype.multiply=function(t){return new c(this.value*$(t).value)},c.prototype.times=c.prototype.multiply,s.prototype.square=function(){return new s(k(this.value),!1)},u.prototype.square=function(){var t=this.value*this.value;return f(t)?new u(t):new s(k(p(Math.abs(this.value))),!1)},c.prototype.square=function(t){return new c(this.value*this.value)},s.prototype.divmod=function(t){var e=P(this,t);return{quotient:e[0],remainder:e[1]}},c.prototype.divmod=u.prototype.divmod=s.prototype.divmod,s.prototype.divide=function(t){return P(this,t)[0]},c.prototype.over=c.prototype.divide=function(t){return new c(this.value/$(t).value)},u.prototype.over=u.prototype.divide=s.prototype.over=s.prototype.divide,s.prototype.mod=function(t){return P(this,t)[1]},c.prototype.mod=c.prototype.remainder=function(t){return new c(this.value%$(t).value)},u.prototype.remainder=u.prototype.mod=s.prototype.remainder=s.prototype.mod,s.prototype.pow=function(t){var e,r,n,i=$(t),o=this.value,s=i.value;if(0===s)return a[1];if(0===o)return a[0];if(1===o)return a[1];if(-1===o)return i.isEven()?a[1]:a[-1];if(i.sign)return a[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&f(e=Math.pow(o,s)))return new u(y(e));for(r=this,n=a[1];!0&s&&(n=n.times(r),--s),0!==s;)s/=2,r=r.square();return n},u.prototype.pow=s.prototype.pow,c.prototype.pow=function(t){var e=$(t),r=this.value,n=e.value,i=BigInt(0),o=BigInt(1),s=BigInt(2);if(n===i)return a[1];if(r===i)return a[0];if(r===o)return a[1];if(r===BigInt(-1))return e.isEven()?a[1]:a[-1];if(e.isNegative())return new c(i);for(var u=this,f=a[1];(n&o)===o&&(f=f.times(u),--n),n!==i;)n/=s,u=u.square();return f},s.prototype.modPow=function(t,e){if(t=$(t),(e=$(e)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=a[1],n=this.mod(e);for(t.isNegative()&&(t=t.multiply(a[-1]),n=n.modInv(e));t.isPositive();){if(n.isZero())return a[0];t.isOdd()&&(r=r.multiply(n).mod(e)),t=t.divide(2),n=n.square().mod(e)}return r},c.prototype.modPow=u.prototype.modPow=s.prototype.modPow,s.prototype.compareAbs=function(t){var e=$(t),r=this.value,n=e.value;return e.isSmall?1:T(r,n)},u.prototype.compareAbs=function(t){var e=$(t),r=Math.abs(this.value),n=e.value;return e.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},c.prototype.compareAbs=function(t){var e=this.value,r=$(t).value;return(e=e>=0?e:-e)===(r=r>=0?r:-r)?0:e>r?1:-1},s.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=$(t),r=this.value,n=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:T(r,n)*(this.sign?-1:1)},s.prototype.compareTo=s.prototype.compare,u.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=$(t),r=this.value,n=e.value;return e.isSmall?r==n?0:r>n?1:-1:r<0!==e.sign?r<0?-1:1:r<0?1:-1},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=this.value,r=$(t).value;return e===r?0:e>r?1:-1},c.prototype.compareTo=c.prototype.compare,s.prototype.equals=function(t){return 0===this.compare(t)},c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals=s.prototype.eq=s.prototype.equals,s.prototype.notEquals=function(t){return 0!==this.compare(t)},c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals=s.prototype.neq=s.prototype.notEquals,s.prototype.greater=function(t){return this.compare(t)>0},c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater=s.prototype.gt=s.prototype.greater,s.prototype.lesser=function(t){return this.compare(t)<0},c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser=s.prototype.lt=s.prototype.lesser,s.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals=s.prototype.geq=s.prototype.greaterOrEquals,s.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals=s.prototype.leq=s.prototype.lesserOrEquals,s.prototype.isEven=function(){return 0==(1&this.value[0])},u.prototype.isEven=function(){return 0==(1&this.value)},c.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},s.prototype.isOdd=function(){return 1==(1&this.value[0])},u.prototype.isOdd=function(){return 1==(1&this.value)},c.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},s.prototype.isPositive=function(){return!this.sign},u.prototype.isPositive=function(){return this.value>0},c.prototype.isPositive=u.prototype.isPositive,s.prototype.isNegative=function(){return this.sign},u.prototype.isNegative=function(){return this.value<0},c.prototype.isNegative=u.prototype.isNegative,s.prototype.isUnit=function(){return!1},u.prototype.isUnit=function(){return 1===Math.abs(this.value)},c.prototype.isUnit=function(){return this.abs().value===BigInt(1)},s.prototype.isZero=function(){return!1},u.prototype.isZero=function(){return 0===this.value},c.prototype.isZero=function(){return this.value===BigInt(0)},s.prototype.isDivisibleBy=function(t){var e=$(t);return!e.isZero()&&(!!e.isUnit()||(0===e.compareAbs(2)?this.isEven():this.mod(e).isZero()))},c.prototype.isDivisibleBy=u.prototype.isDivisibleBy=s.prototype.isDivisibleBy,s.prototype.isPrime=function(t){var r=B(this);if(undefined!==r)return r;var n=this.abs(),i=n.bitLength();if(i<=64)return I(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var o=Math.log(2)*i.toJSNumber(),a=Math.ceil(!0===t?2*Math.pow(o,2):o),s=[],u=0;u<a;u++)s.push(e(u+2));return I(n,s)},c.prototype.isPrime=u.prototype.isPrime=s.prototype.isPrime,s.prototype.isProbablePrime=function(t,r){var n=B(this);if(undefined!==n)return n;for(var i=this.abs(),o=undefined===t?5:t,a=[],s=0;s<o;s++)a.push(e.randBetween(2,i.minus(2),r));return I(i,a)},c.prototype.isProbablePrime=u.prototype.isProbablePrime=s.prototype.isProbablePrime,s.prototype.modInv=function(t){for(var r,n,i,o=e.zero,a=e.one,s=$(t),u=this.abs();!u.isZero();)r=s.divide(u),n=o,i=s,o=a,s=u,a=n.subtract(r.multiply(a)),u=i.subtract(r.multiply(u));if(!s.isUnit())throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===o.compare(0)&&(o=o.add(t)),this.isNegative()?o.negate():o},c.prototype.modInv=u.prototype.modInv=s.prototype.modInv,s.prototype.next=function(){var t=this.value;return this.sign?w(t,1,this.sign):new s(v(t,1),this.sign)},u.prototype.next=function(){var t=this.value;return t+1<n?new u(t+1):new s(i,!1)},c.prototype.next=function(){return new c(this.value+BigInt(1))},s.prototype.prev=function(){var t=this.value;return this.sign?new s(v(t,1),!0):w(t,1,this.sign)},u.prototype.prev=function(){var t=this.value;return t-1>-n?new u(t-1):new s(i,!0)},c.prototype.prev=function(){return new c(this.value-BigInt(1))};for(var j=[1];2*j[j.length-1]<=r;)j.push(2*j[j.length-1]);var U=j.length,M=j[U-1];function R(t){return Math.abs(t)<=r}function F(t,r,n){r=$(r);for(var i=t.isNegative(),o=r.isNegative(),a=i?t.not():t,s=o?r.not():r,u=0,c=0,f=null,p=null,l=[];!a.isZero()||!s.isZero();)u=(f=P(a,M))[1].toJSNumber(),i&&(u=M-1-u),c=(p=P(s,M))[1].toJSNumber(),o&&(c=M-1-c),a=f[0],s=p[0],l.push(n(u,c));for(var h=0!==n(i?1:0,o?1:0)?e(-1):e(0),d=l.length-1;d>=0;d-=1)h=h.multiply(M).add(e(l[d]));return h}s.prototype.shiftLeft=function(t){var e=$(t).toJSNumber();if(!R(e))throw new Error(String(e)+" is too large for shifting.");if(e<0)return this.shiftRight(-e);var r=this;if(r.isZero())return r;for(;e>=U;)r=r.multiply(M),e-=U-1;return r.multiply(j[e])},c.prototype.shiftLeft=u.prototype.shiftLeft=s.prototype.shiftLeft,s.prototype.shiftRight=function(t){var e,r=$(t).toJSNumber();if(!R(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;r>=U;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(e=P(n,M))[1].isNegative()?e[0].prev():e[0],r-=U-1}return(e=P(n,j[r]))[1].isNegative()?e[0].prev():e[0]},c.prototype.shiftRight=u.prototype.shiftRight=s.prototype.shiftRight,s.prototype.not=function(){return this.negate().prev()},c.prototype.not=u.prototype.not=s.prototype.not,s.prototype.and=function(t){return F(this,t,(function(t,e){return t&e}))},c.prototype.and=u.prototype.and=s.prototype.and,s.prototype.or=function(t){return F(this,t,(function(t,e){return t|e}))},c.prototype.or=u.prototype.or=s.prototype.or,s.prototype.xor=function(t){return F(this,t,(function(t,e){return t^e}))},c.prototype.xor=u.prototype.xor=s.prototype.xor;function C(t){var e=t.value,n="number"==typeof e?1073741824|e:"bigint"==typeof e?e|BigInt(1073741824):e[0]+e[1]*r|1073758208;return n&-n}function _(t,e){return t=$(t),e=$(e),t.greater(e)?t:e}function z(t,e){return t=$(t),e=$(e),t.lesser(e)?t:e}function L(t,e){if(t=$(t).abs(),e=$(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var r,n,i=a[1];t.isEven()&&e.isEven();)r=z(C(t),C(e)),t=t.divide(r),e=e.divide(r),i=i.multiply(r);for(;t.isEven();)t=t.divide(C(t));do{for(;e.isEven();)e=e.divide(C(e));t.greater(e)&&(n=e,e=t,t=n),e=e.subtract(t)}while(!e.isZero());return i.isUnit()?t:t.multiply(i)}s.prototype.bitLength=function(){var t=this;return t.compareTo(e(0))<0&&(t=t.negate().subtract(e(1))),0===t.compareTo(e(0))?e(0):e(function t(r,n){if(n.compareTo(r)<=0){var i=t(r,n.square(n)),o=i.p,a=i.e,s=o.multiply(n);return s.compareTo(r)<=0?{p:s,e:2*a+1}:{p:o,e:2*a}}return{p:e(1),e:0}}(t,e(2)).e).add(e(1))},c.prototype.bitLength=u.prototype.bitLength=s.prototype.bitLength;var N=function(t,e,r,n){r=r||"0123456789abcdefghijklmnopqrstuvwxyz",t=String(t),n||(t=t.toLowerCase(),r=r.toLowerCase());var i,o=t.length,a=Math.abs(e),s={};for(i=0;i<r.length;i++)s[r[i]]=i;for(i=0;i<o;i++){if("-"!==(f=t[i])&&(f in s&&s[f]>=a)){if("1"===f&&1===a)continue;throw new Error(f+" is not a valid digit in base "+e+".")}}e=$(e);var u=[],c="-"===t[0];for(i=c?1:0;i<t.length;i++){var f;if((f=t[i])in s)u.push($(s[f]));else{if("<"!==f)throw new Error(f+" is not a valid character");var p=i;do{i++}while(">"!==t[i]&&i<t.length);u.push($(t.slice(p+1,i)))}}return D(u,e,c)};function D(t,e,r){var n,i=a[0],o=a[1];for(n=t.length-1;n>=0;n--)i=i.add(t[n].times(o)),o=o.times(e);return r?i.negate():i}function K(t,r){if((r=e(r)).isZero()){if(t.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(r.equals(-1)){if(t.isZero())return{value:[0],isNegative:!1};if(t.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-t.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(t.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}var i=!1;if(t.isNegative()&&r.isPositive()&&(i=!0,t=t.abs()),r.isUnit())return t.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(t.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:i};for(var o,a=[],s=t;s.isNegative()||s.compareAbs(r)>=0;){o=s.divmod(r),s=o.quotient;var u=o.remainder;u.isNegative()&&(u=r.minus(u).abs(),s=s.next()),a.push(u.toJSNumber())}return a.push(s.toJSNumber()),{value:a.reverse(),isNegative:i}}function H(t,e,r){var n=K(t,e);return(n.isNegative?"-":"")+n.value.map((function(t){return function(t,e){return t<(e=e||"0123456789abcdefghijklmnopqrstuvwxyz").length?e[t]:"<"+t+">"}(t,r)})).join("")}function q(t){if(f(+t)){var e=+t;if(e===y(e))return o?new c(BigInt(e)):new u(e);throw new Error("Invalid integer: "+t)}var r="-"===t[0];r&&(t=t.slice(1));var n=t.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var i=n[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==y(i)||!f(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var a=n[0],p=a.indexOf(".");if(p>=0&&(i-=a.length-p-1,a=a.slice(0,p)+a.slice(p+1)),i<0)throw new Error("Cannot include negative exponent part for integers");t=a+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);if(o)return new c(BigInt(r?"-"+t:t));for(var l=[],d=t.length,g=d-7;d>0;)l.push(+t.slice(g,d)),(g-=7)<0&&(g=0),d-=7;return h(l),new s(l,r)}function $(t){return"number"==typeof t?function(t){if(o)return new c(BigInt(t));if(f(t)){if(t!==y(t))throw new Error(t+" is not an integer.");return new u(t)}return q(t.toString())}(t):"string"==typeof t?q(t):"bigint"==typeof t?new c(t):t}s.prototype.toArray=function(t){return K(this,t)},u.prototype.toArray=function(t){return K(this,t)},c.prototype.toArray=function(t){return K(this,t)},s.prototype.toString=function(t,e){if(undefined===t&&(t=10),10!==t)return H(this,t,e);for(var r,n=this.value,i=n.length,o=String(n[--i]);--i>=0;)r=String(n[i]),o+="0000000".slice(r.length)+r;return(this.sign?"-":"")+o},u.prototype.toString=function(t,e){return undefined===t&&(t=10),10!=t?H(this,t,e):String(this.value)},c.prototype.toString=u.prototype.toString,c.prototype.toJSON=s.prototype.toJSON=u.prototype.toJSON=function(){return this.toString()},s.prototype.valueOf=function(){return parseInt(this.toString(),10)},s.prototype.toJSNumber=s.prototype.valueOf,u.prototype.valueOf=function(){return this.value},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=c.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var G=0;G<1e3;G++)a[G]=$(G),G>0&&(a[-G]=$(-G));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=_,a.min=z,a.gcd=L,a.lcm=function(t,e){return t=$(t).abs(),e=$(e).abs(),t.divide(L(t,e)).multiply(e)},a.isInstance=function(t){return t instanceof s||t instanceof u||t instanceof c},a.randBetween=function(t,e,n){t=$(t),e=$(e);var i=n||Math.random,o=z(t,e),s=_(t,e).subtract(o).add(1);if(s.isSmall)return o.add(Math.floor(i()*s));for(var u=K(s,r).value,c=[],f=!0,p=0;p<u.length;p++){var l=f?u[p]:r,h=y(i()*l);c.push(h),h<l&&(f=!1)}return o.add(a.fromArray(c,r,!1))},a.fromArray=function(t,e,r){return D(t.map($),$(e||10),r)},a}();t.hasOwnProperty("exports")&&(t.exports=e)})),de="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,ye=Object.prototype.toString,ge=function(t){return!(de&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===ye.call(t)},me=function(t){return!!ge(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==ye.call(t)&&"[object Function]"===ye.call(t.callee)},ve=function(){return ge(arguments)}();ge.isLegacyArguments=me;var be=ve?ge:me,we=Object.prototype.toString,Se=Function.prototype.toString,Ee=/^\s*(?:function)?\*/,Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,xe=Object.getPrototypeOf,ke=function(){if(!Ae)return!1;try{return Function("return function*() {}")()}catch(t){}}(),Oe=ke?xe(ke):{},Pe=function(t){return"function"==typeof t&&(!!Ee.test(Se.call(t))||(Ae?xe(t)===Oe:"[object GeneratorFunction]"===we.call(t)))},Te=Object.prototype.hasOwnProperty,Be=Object.prototype.toString,Ie=function(t,e,r){if("[object Function]"!==Be.call(e))throw new TypeError("iterator must be a function");var n=t.length;if(n===+n)for(var i=0;i<n;i++)e.call(r,t[i],i,t);else for(var o in t)Te.call(t,o)&&e.call(r,t[o],o,t)},je=Object.prototype.hasOwnProperty,Ue=function(){return function(t,e,r){if(t.filter)return t.filter(e,r);if(null==t)throw new TypeError;if("function"!=typeof e)throw new TypeError;for(var n=[],i=0;i<t.length;i++)if(je.call(t,i)){var o=t[i];e.call(r,o,i,t)&&n.push(o)}return n}(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],(function(t){return"function"==typeof Ot[t]}))},Me=Ot.Symbol,Re=function(){return"function"==typeof Me&&("function"==typeof Symbol&&("symbol"==typeof Me("foo")&&("symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}())))},Fe="Function.prototype.bind called on incompatible ",Ce=Array.prototype.slice,_e=Object.prototype.toString,ze=Function.prototype.bind||function(t){var e=this;if("function"!=typeof e||"[object Function]"!==_e.call(e))throw new TypeError(Fe+e);for(var r,n=Ce.call(arguments,1),i=function(){if(this instanceof r){var i=e.apply(this,n.concat(Ce.call(arguments)));return Object(i)===i?i:this}return e.apply(t,n.concat(Ce.call(arguments)))},o=Math.max(0,e.length-n.length),a=[],s=0;s<o;s++)a.push("$"+s);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null}return r},Le=TypeError,Ne=Object.getOwnPropertyDescriptor;if(Ne)try{Ne({},"")}catch(t){Ne=null}var De=function(){throw new Le},Ke=Ne?function(){try{return De}catch(t){try{return Ne(arguments,"callee").get}catch(t){return De}}}():De,He=Re(),qe=Object.getPrototypeOf||function(t){return t.__proto__},$e="undefined"==typeof Uint8Array?undefined:qe(Uint8Array),Ge={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":He?qe([][Symbol.iterator]()):undefined,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":undefined,"%AsyncFunctionPrototype%":undefined,"%AsyncGenerator%":undefined,"%AsyncGeneratorFunction%":undefined,"%AsyncGeneratorPrototype%":undefined,"%AsyncIteratorPrototype%":undefined,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?undefined:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?undefined:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?undefined:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":undefined,"%GeneratorFunction%":undefined,"%GeneratorPrototype%":undefined,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?undefined:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?undefined:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?undefined:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":He?qe(qe([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%JSONParse%":"object"==typeof JSON?JSON.parse:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&He?qe((new Map)[Symbol.iterator]()):undefined,"%MapPrototype%":"undefined"==typeof Map?undefined:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%PromisePrototype%":"undefined"==typeof Promise?undefined:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?undefined:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?undefined:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?undefined:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?undefined:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&He?qe((new Set)[Symbol.iterator]()):undefined,"%SetPrototype%":"undefined"==typeof Set?undefined:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":He?qe(""[Symbol.iterator]()):undefined,"%StringPrototype%":String.prototype,"%Symbol%":He?Symbol:undefined,"%SymbolPrototype%":He?Symbol.prototype:undefined,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Ke,"%TypedArray%":$e,"%TypedArrayPrototype%":$e?$e.prototype:undefined,"%TypeError%":Le,"%TypeErrorPrototype%":Le.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?undefined:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?undefined:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?undefined:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?undefined:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?undefined:WeakSet.prototype},Ve=ze.call(Function.call,String.prototype.replace),We=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ye=/\\(\\)?/g,Ze=function(t){var e=[];return Ve(t,We,(function(t,r,n,i){e[e.length]=n?Ve(i,Ye,"$1"):r||t})),e},Je=function(t,e){if(!(t in Ge))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===Ge[t]&&!e)throw new Le("intrinsic "+t+" exists, but is not available. Please file an issue!");return Ge[t]},Xe=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var r=Ze(t),n=Je("%"+(r.length>0?r[0]:"")+"%",e),i=1;i<r.length;i+=1)if(null!=n)if(Ne&&i+1>=r.length){var o=Ne(n,r[i]);if(!e&&!(r[i]in n))throw new Le("base intrinsic for "+t+" exists, but the property is not available.");n=o?o.get||o.value:n[r[i]]}else n=n[r[i]];return n},Qe=Xe("%Function.prototype.apply%"),tr=Xe("%Function.prototype.call%"),er=Xe("%Reflect.apply%",!0)||ze.call(tr,Qe),rr=function(){return er(ze,tr,arguments)};rr.apply=function(){return er(ze,Qe,arguments)};var nr=rr(Xe("String.prototype.indexOf")),ir=function(t,e){var r=Xe(t,!!e);return"function"==typeof r&&nr(t,".prototype.")?rr(r):r},or=Xe("%Object.getOwnPropertyDescriptor%");if(or)try{or([],"length")}catch(t){or=null}var ar=or,sr=ir("Object.prototype.toString"),ur=Re()&&"symbol"==typeof Symbol.toStringTag,cr=Ue(),fr=ir("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},pr=ir("String.prototype.slice"),lr={},hr=Object.getPrototypeOf;ur&&ar&&hr&&Ie(cr,(function(t){var e=new Ot[t];if(!(Symbol.toStringTag in e))throw new EvalError("this engine has support for Symbol.toStringTag, but "+t+" does not have the property! Please report this.");var r=hr(e),n=ar(r,Symbol.toStringTag);if(!n){var i=hr(r);n=ar(i,Symbol.toStringTag)}lr[t]=n.get}));var dr=function(t){if(!t||"object"!=typeof t)return!1;if(!ur){var e=pr(sr(t),8,-1);return fr(cr,e)>-1}return!!ar&&function(t){var e=!1;return Ie(lr,(function(r,n){if(!e)try{e=r.call(t)===n}catch(t){}})),e}(t)},yr=ir("Object.prototype.toString"),gr=Re()&&"symbol"==typeof Symbol.toStringTag,mr=Ue(),vr=ir("String.prototype.slice"),br={},wr=Object.getPrototypeOf;gr&&ar&&wr&&Ie(mr,(function(t){if("function"==typeof Ot[t]){var e=new Ot[t];if(!(Symbol.toStringTag in e))throw new EvalError("this engine has support for Symbol.toStringTag, but "+t+" does not have the property! Please report this.");var r=wr(e),n=ar(r,Symbol.toStringTag);if(!n){var i=wr(r);n=ar(i,Symbol.toStringTag)}br[t]=n.get}}));var Sr=function(t){return!!dr(t)&&(gr?function(t){var e=!1;return Ie(br,(function(r,n){if(!e)try{var i=r.call(t);i===n&&(e=i)}catch(t){}})),e}(t):vr(yr(t),8,-1))},Er=Pt((function(t,e){function r(t){return t.call.bind(t)}var n=void 0!==he,i="undefined"!=typeof Symbol,o=r(Object.prototype.toString),a=r(Number.prototype.valueOf),s=r(String.prototype.valueOf),u=r(Boolean.prototype.valueOf);if(n)var c=r(he.prototype.valueOf);if(i)var f=r(Symbol.prototype.valueOf);function p(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function l(t){return"[object Map]"===o(t)}function h(t){return"[object Set]"===o(t)}function d(t){return"[object WeakMap]"===o(t)}function y(t){return"[object WeakSet]"===o(t)}function g(t){return"[object ArrayBuffer]"===o(t)}function m(t){return"undefined"!=typeof ArrayBuffer&&(g.working?g(t):t instanceof ArrayBuffer)}function v(t){return"[object DataView]"===o(t)}function b(t){return"undefined"!=typeof DataView&&(v.working?v(t):t instanceof DataView)}function w(t){return"[object SharedArrayBuffer]"===o(t)}function S(t){return"undefined"!=typeof SharedArrayBuffer&&(w.working?w(t):t instanceof SharedArrayBuffer)}function E(t){return p(t,a)}function A(t){return p(t,s)}function x(t){return p(t,u)}function k(t){return n&&p(t,c)}function O(t){return i&&p(t,f)}e.isArgumentsObject=be,e.isGeneratorFunction=Pe,e.isTypedArray=dr,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):dr(t)||b(t)},e.isUint8Array=function(t){return"Uint8Array"===Sr(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===Sr(t)},e.isUint16Array=function(t){return"Uint16Array"===Sr(t)},e.isUint32Array=function(t){return"Uint32Array"===Sr(t)},e.isInt8Array=function(t){return"Int8Array"===Sr(t)},e.isInt16Array=function(t){return"Int16Array"===Sr(t)},e.isInt32Array=function(t){return"Int32Array"===Sr(t)},e.isFloat32Array=function(t){return"Float32Array"===Sr(t)},e.isFloat64Array=function(t){return"Float64Array"===Sr(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===Sr(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===Sr(t)},l.working="undefined"!=typeof Map&&l(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(l.working?l(t):t instanceof Map)},h.working="undefined"!=typeof Set&&h(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(h.working?h(t):t instanceof Set)},d.working="undefined"!=typeof WeakMap&&d(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(d.working?d(t):t instanceof WeakMap)},y.working="undefined"!=typeof WeakSet&&y(new WeakSet),e.isWeakSet=function(t){return y(t)},g.working="undefined"!=typeof ArrayBuffer&&g(new ArrayBuffer),e.isArrayBuffer=m,v.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&v(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=b,w.working="undefined"!=typeof SharedArrayBuffer&&w(new SharedArrayBuffer),e.isSharedArrayBuffer=S,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===o(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===o(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===o(t)},e.isGeneratorObject=function(t){return"[object Generator]"===o(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===o(t)},e.isNumberObject=E,e.isStringObject=A,e.isBooleanObject=x,e.isBigIntObject=k,e.isSymbolObject=O,e.isBoxedPrimitive=function(t){return E(t)||A(t)||x(t)||k(t)||O(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(m(t)||S(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))})),Ar=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},xr=Pt((function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),kr=Pt((function(t,e){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},n=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,o=i.length,a=String(t).replace(n,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return t}})),u=i[r];r<o;u=i[++r])y(u)||!w(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(t,r){if(void 0!==le&&!0===le.noDeprecation)return t;if(void 0===le)return function(){return e.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(le.throwDeprecation)throw new Error(r);le.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var i={},o=/^$/;if(le.env.NODE_DEBUG){var a=le.env.NODE_DEBUG;a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+a+"$","i")}function s(t,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),f(n,t,n.depth)}function u(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function c(t,e){return t}function f(t,r,n){if(t.customInspect&&r&&A(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=f(t,i,n)),i}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(g(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(y(e))return t.stylize("null","null")}(t,r);if(o)return o;var a=Object.keys(r),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),E(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(r);if(0===a.length){if(A(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(b(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return t.stylize(Date.prototype.toString.call(r),"date");if(E(r))return p(r)}var c,w="",x=!1,k=["{","}"];(h(r)&&(x=!0,k=["[","]"]),A(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(w=" "+RegExp.prototype.toString.call(r)),S(r)&&(w=" "+Date.prototype.toUTCString.call(r)),E(r)&&(w=" "+p(r)),0!==a.length||x&&0!=r.length?n<0?b(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=x?function(t,e,r,n,i){for(var o=[],a=0,s=e.length;a<s;++a)T(e,String(a))?o.push(l(t,e,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(l(t,e,r,n,i,!0))})),o}(t,r,n,s,a):a.map((function(e){return l(t,r,n,s,e,x)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(c,w,k)):k[0]+w+k[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,r,n,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),T(n,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=y(r)?f(t,u.value,null):f(t,u.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),v(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function h(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return"number"==typeof t}function m(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===x(t)}function w(t){return"object"==typeof t&&null!==t}function S(t){return w(t)&&"[object Date]"===x(t)}function E(t){return w(t)&&("[object Error]"===x(t)||t instanceof Error)}function A(t){return"function"==typeof t}function x(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!i[t])if(o.test(t)){var r=le.pid;i[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else i[t]=function(){};return i[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=Er,e.isArray=h,e.isBoolean=d,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.types.isRegExp=b,e.isObject=w,e.isDate=S,e.types.isDate=S,e.isError=E,e.types.isNativeError=E,e.isFunction=A,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=Ar;var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))},e.inherits=xr,e._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var B="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(B&&t[B]){var e;if("function"!=typeof(e=t[B]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,B,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),B&&Object.defineProperty(e,B,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=B,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return n.apply(i,arguments)};t.apply(this,e).then((function(t){le.nextTick(o.bind(null,null,t))}),(function(t){le.nextTick(I.bind(null,t,o))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,r(t)),e}}));function Or(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}var Pr,Tr=Object.prototype.hasOwnProperty,Br=Object.keys||function(t){var e=[];for(var r in t)Tr.call(t,r)&&e.push(r);return e},Ir=Array.prototype.slice;function jr(){return void 0!==Pr?Pr:Pr="foo"===function(){}.name}function Ur(t){return Object.prototype.toString.call(t)}function Mr(t){return!Kt.isBuffer(t)&&("function"==typeof B.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function Rr(t,e){t||Nr(t,!0,e,"==",Dr)}var Fr=/\s*function\s+([^\(\s]*)\s*/;function Cr(t){if(kr.isFunction(t)){if(jr())return t.name;var e=t.toString().match(Fr);return e&&e[1]}}function _r(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return zr(Lr(t.actual),128)+" "+t.operator+" "+zr(Lr(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||Nr;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=Cr(e),o=n.indexOf("\n"+i);if(o>=0){var a=n.indexOf("\n",o+1);n=n.substring(a+1)}this.stack=n}}}function zr(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function Lr(t){if(jr()||!kr.isFunction(t))return kr.inspect(t);var e=Cr(t);return"[Function"+(e?": "+e:"")+"]"}function Nr(t,e,r,n,i){throw new _r({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function Dr(t,e){t||Nr(t,!0,e,"==",Dr)}function Kr(t,e,r,n){if(t===e)return!0;if(Kt.isBuffer(t)&&Kt.isBuffer(e))return 0===Or(t,e);if(kr.isDate(t)&&kr.isDate(e))return t.getTime()===e.getTime();if(kr.isRegExp(t)&&kr.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(Mr(t)&&Mr(e)&&Ur(t)===Ur(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===Or(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(Kt.isBuffer(t)!==Kt.isBuffer(e))return!1;var i=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==i&&i===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,r,n){if(null==t||null==e)return!1;if(kr.isPrimitive(t)||kr.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=Hr(t),o=Hr(e);if(i&&!o||!i&&o)return!1;if(i)return Kr(t=Ir.call(t),e=Ir.call(e),r);var a,s,u=Br(t),c=Br(e);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(!Kr(t[a=u[s]],e[a],r,n))return!1;return!0}(t,e,r,n))}return r?t===e:t==e}function Hr(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function qr(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function $r(t,e,r,n){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&Nr(i,r,"Missing expected exception"+n);var o="string"==typeof n,a=!t&&i&&!r;if((!t&&kr.isError(i)&&o&&qr(i,r)||a)&&Nr(i,r,"Got unwanted exception"+n),t&&i&&r&&!qr(i,r)||!t&&i)throw i}Rr.AssertionError=_r,kr.inherits(_r,Error),Rr.fail=Nr,Rr.ok=Dr,Rr.equal=function t(e,r,n){e!=r&&Nr(e,r,n,"==",t)},Rr.notEqual=function t(e,r,n){e==r&&Nr(e,r,n,"!=",t)},Rr.deepEqual=function t(e,r,n){Kr(e,r,!1)||Nr(e,r,n,"deepEqual",t)},Rr.deepStrictEqual=function t(e,r,n){Kr(e,r,!0)||Nr(e,r,n,"deepStrictEqual",t)},Rr.notDeepEqual=function t(e,r,n){Kr(e,r,!1)&&Nr(e,r,n,"notDeepEqual",t)},Rr.notDeepStrictEqual=function t(e,r,n){Kr(e,r,!0)&&Nr(e,r,n,"notDeepStrictEqual",t)},Rr.strictEqual=function t(e,r,n){e!==r&&Nr(e,r,n,"===",t)},Rr.notStrictEqual=function t(e,r,n){e===r&&Nr(e,r,n,"!==",t)},Rr.throws=function(t,e,r){$r(!0,t,e,r)},Rr.doesNotThrow=function(t,e,r){$r(!1,t,e,r)},Rr.ifError=function(t){if(t)throw t};var Gr=function(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;++n)t[n]=t[n]^e[n];return t},Vr={};class Wr extends Error{constructor(t){super(t),Object.defineProperty(this,"message",{enumerable:!1,value:t}),Object.defineProperty(this,"name",{enumerable:!1,value:this.constructor.name}),Error.captureStackTrace(this,this.constructor)}}class Yr extends Wr{constructor(t,e){super("Expected flag to be ".concat(t,", but got ").concat(e,"."))}}class Zr extends Wr{constructor(t,e){super("Expected length to be ".concat(t,", but got ").concat(e,"."))}}class Jr extends Wr{constructor(t,e){super("Expected prefix to be ".concat(t,", but got ").concat(e,"."))}}class Xr extends Wr{constructor(t,e){super("Expected type to be ".concat(t,", but got ").concat(e,"."))}}class Qr extends Wr{constructor(){super("Feature is not available.")}}class tn extends Wr{constructor(t,e){super("Expected length to be ".concat(t,", but got ").concat(e,"."))}}class en extends Wr{constructor(t){super(t)}}class rn extends Wr{constructor(t){super("Failed to deserialize transaction, encountered invalid bytes: ".concat(t))}}class nn extends Wr{constructor(t){super(t)}}class on extends Wr{constructor(t){super("Version ".concat(t," not supported."))}}class an extends Wr{constructor(t){super("Unknown transaction type: ".concat(t))}}class sn extends Wr{constructor(t){super("Transaction type ".concat(t," is already registered."))}}class un extends Wr{constructor(t){super("Transaction key ".concat(t," is already registered."))}}class cn extends Wr{constructor(t,e){super("Transaction type ".concat(t," is already registered in version ").concat(e,"."))}}class fn extends Wr{constructor(t){super("Number of payments exceeded the allowed maximum of ".concat(t,"."))}}class pn extends Wr{constructor(){super("Number of payments subceeded the required minimum of 2.")}}class ln extends Wr{constructor(t){super("Length of vendor field exceeded the allowed maximum ".concat(t,"."))}}class hn extends Wr{constructor(){super("Expected the transaction to be signed.")}}class dn extends Wr{constructor(t,e){super("Height (".concat(t,"): ").concat(e))}}class yn extends Wr{constructor(t,e){super("The config denotes that the block at height ".concat(t-1," ")+"must use full SHA256 block id, but the next block (at ".concat(t,") ")+'contains previous block id "'.concat(e,'"'))}}class gn extends Wr{constructor(t){super(t)}}class mn extends Wr{constructor(){super("The multi signature asset is invalid.")}}class vn extends Wr{constructor(){super("Invalid multi signature, because duplicate participant found.")}}var bn=Object.freeze({__proto__:null,CryptoError:Wr,Bip38CompressionError:Yr,Bip38LengthError:Zr,Bip38PrefixError:Jr,Bip38TypeError:Xr,NetworkVersionError:class extends Wr{constructor(t,e){super("Expected version to be ".concat(t,", but got ").concat(e,"."))}},NotImplemented:Qr,PrivateKeyLengthError:tn,PublicKeyError:class extends Wr{constructor(t){super("Expected ".concat(t," to be a valid public key."))}},AddressNetworkError:en,TransactionTypeError:class extends Wr{constructor(t){super("Type ".concat(t," not supported."))}},InvalidTransactionBytesError:rn,TransactionSchemaError:nn,TransactionVersionError:on,UnkownTransactionError:an,TransactionAlreadyRegisteredError:sn,TransactionKeyAlreadyRegisteredError:un,TransactionVersionAlreadyRegisteredError:cn,CoreTransactionTypeGroupImmutableError:class extends Wr{constructor(){super("The Core transaction type group is immutable.")}},MissingMilestoneFeeError:class extends Wr{constructor(t){super("Missing milestone fee for '".concat(t,"'."))}},MaximumPaymentCountExceededError:fn,MinimumPaymentCountSubceededError:pn,VendorFieldLengthExceededError:ln,MissingTransactionSignatureError:hn,BlockSchemaError:dn,PreviousBlockIdFormatError:yn,InvalidMilestoneConfigurationError:gn,InvalidMultiSignatureAssetError:mn,DuplicateParticipantInMultiSignatureError:vn}),wn=Object.freeze(Object.assign(Object.create(null),y));var Sn=new class{constructor(){this.setConfig(g)}setConfig(t){this.config={network:t.network,exceptions:t.exceptions,milestones:t.milestones,genesisBlock:t.genesisBlock},this.validateMilestones(),this.buildConstants()}setFromPreset(t){this.setConfig(this.getPreset(t))}getPreset(t){return wn[t.toLowerCase()]}all(){return this.config}set(t,e){if(!this.config)throw new Error;d(this.config,t,e)}get(t){return h(this.config,t)}setHeight(t){this.height=t}getHeight(){return this.height}isNewMilestone(t){if(t=t||this.height,!this.milestones)throw new Error;return this.milestones.some(e=>e.height===t)}getMilestone(t){if(!this.milestone||!this.milestones)throw new Error;for(!t&&this.height&&(t=this.height),t||(t=1);this.milestone.index<this.milestones.length-1&&t>=this.milestones[this.milestone.index+1].height;)this.milestone.index++,this.milestone.data=this.milestones[this.milestone.index];for(;t<this.milestones[this.milestone.index].height;)this.milestone.index--,this.milestone.data=this.milestones[this.milestone.index];return this.milestone.data}getNextMilestoneWithNewKey(t,e){if(!this.milestones||!this.milestones.length)throw new Error("Attempted to get next milestone but none were set");for(var r=0;r<this.milestones.length;r++){var n=this.milestones[r];if(n[e]&&n[e]!==this.getMilestone(t)[e]&&n.height>t)return{found:!0,height:n.height,data:n[e]}}return{found:!1,height:t,data:null}}getMilestones(){return this.milestones}buildConstants(){if(!this.config)throw new Error;this.milestones=this.config.milestones.sort((t,e)=>t.height-e.height),this.milestone={index:0,data:this.milestones[0]};for(var t=0,e=(t,e,r)=>e;t<this.milestones.length-1;)this.milestones[t+1]=l(this.milestones[t],this.milestones[t+1],{arrayMerge:e}),t++}validateMilestones(){if(!this.config)throw new Error;for(var t=this.config.milestones.sort((t,e)=>t.height-e.height).filter(t=>t.activeDelegates),e=1;e<t.length;e++){var r=t[e-1],n=t[e];if(r.activeDelegates!==n.activeDelegates&&(n.height-r.height)%r.activeDelegates!=0)throw new gn("Bad milestone at height: ".concat(n.height,". The number of delegates can only be changed at the beginning of a new round."))}}};var En=Object.freeze({__proto__:null,configManager:Sn,NetworkManager:class{static all(){return wn}static findByName(t){return wn[t.toLowerCase()]}}}),An=t=>t?t.wif:Sn.get("network.wif"),xn=t=>t?t.pubKeyHash:Sn.get("network.pubKeyHash"),kn=t=>t||Sn.get("network.pubKeyHash");class On{static fromPassphrase(t,e){return s.fromPassphrase(t,{pubKeyHash:kn(e)})}static fromPublicKey(t,e){return s.fromPublicKey(t,{pubKeyHash:kn(e)})}static fromWIF(t,e){return s.fromWIF(t,{pubKeyHash:xn(e),wif:An(e)})}static fromMultiSignatureAsset(t,e){return s.fromMultiSignatureAsset(t,{pubKeyHash:kn(e)})}static fromPrivateKey(t,e){return s.fromPrivateKey(t,{pubKeyHash:kn(e)})}static fromBuffer(t){return s.fromBuffer(t)}static toBuffer(t,e){return s.toBuffer(t,{pubKeyHash:kn(e)})}static validate(t,e){return s.validate(t,{pubKeyHash:kn(e)})}}class Pn{static fromPassphrase(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u.fromPassphrase(t,e)}static fromPrivateKey(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u.fromPrivateKey(t,e)}static fromWIF(t,e){return u.fromWIF(t,{wif:An(e)})}}var Tn=Object.freeze({__proto__:null,Address:On,Keys:Pn,PrivateKey:class{static fromPassphrase(t){return c.fromPassphrase(t)}static fromWIF(t,e){return c.fromWIF(t,{wif:An(e)})}},PublicKey:class{static fromPassphrase(t){return f.fromPassphrase(t)}static fromWIF(t,e){return f.fromWIF(t,{wif:An(e)})}static fromMultiSignatureAsset(t){return f.fromMultiSignatureAsset(t)}static verify(t){return f.verify(t)}},WIF:class{static fromPassphrase(t,e){return p.fromPassphrase(t,{wif:An(e)})}static fromKeys(t,e){return p.fromKeys(t,{wif:An(e)})}}}),Bn={encodeCheck:v(t=>{var e=_n.hash256(t);return m.encode(H.concat([t,e],t.length+4))}),decodeCheck:v(t=>{var e=m.decode(t),r=e.slice(0,-4);if(_n.hash256(r).readUInt32LE(0)!==e.slice(-4).readUInt32LE(0))throw new Error("Invalid checksum");return r})},In={N:16384,r:8,p:8},jn=H.alloc(0),Un=(t,e)=>H.from(Pn.fromPrivateKey(t,e).publicKey,"hex"),Mn=(t,e)=>{var r=Un(t,e),n=_n.hash160(r),i=H.alloc(21);return i.writeUInt8(0,0),n.copy(i,1),Bn.encodeCheck(i)},Rn=(e,r)=>{if(39!==e.length)throw new Zr(39,e.length);if(1!==e.readUInt8(0))throw new Jr(1,e.readUInt8(0));var n=e.readUInt8(1);if(67===n)return((e,r)=>{var n=(e=e.slice(1)).readUInt8(1),i=0!=(32&n),o=0!=(4&n);Rr.strictEqual(36&n,n,"Invalid private key.");var s,u=e.slice(2,6),c=e.slice(6,14);s=o?c.slice(0,4):c;var f,p=e.slice(14,22),l=e.slice(22,38),h=Vr.scryptSync(r,s,32,In);if(o){var d=H.concat([h,c]);f=_n.hash256(d)}else f=h;var y=Un(f,!0),g=Vr.scryptSync(y,H.concat([u,c]),64,{N:1024,r:1,p:1}),m=g.slice(0,32),v=g.slice(32,64),b=a.createDecipheriv("aes-256-ecb",v,H.alloc(0));b.setAutoPadding(!1),b.end(l);var w=b.read(),S=Gr(w,m.slice(16,32)),E=S.slice(8,16),A=a.createDecipheriv("aes-256-ecb",v,H.alloc(0));A.setAutoPadding(!1),A.write(p),A.end(S.slice(0,8));var x=Gr(A.read(),m.slice(0,16)),k=H.concat([x,E],24);return{privateKey:t.privateKeyTweakMul(_n.hash256(k),f),compressed:i}})(e,r);if(66!==n)throw new Xr(66,n);var i=e.readUInt8(2),o=224===i;if(!o&&192!==i)throw new Yr(192,i);var s=e.slice(3,7),u=Vr.scryptSync(r,s,64,In),c=u.slice(0,32),f=u.slice(32,64),p=e.slice(7,39),l=a.createDecipheriv("aes-256-ecb",f,jn);l.setAutoPadding(!1),l.end(p);var h=l.read(),d=Gr(c,h),y=Mn(d,o),g=_n.hash256(y).slice(0,4);return Rr.deepEqual(s,g),{privateKey:d,compressed:o}},Fn=Object.freeze({__proto__:null,verify:t=>{var e;try{e=Bn.decodeCheck(t)}catch(t){return!1}if(!e)return!1;if(39!==e.length)return!1;if(1!==e.readUInt8(0))return!1;var r=e.readUInt8(1),n=e.readUInt8(2);if(66===r){if(192!==n&&224!==n)return!1}else{if(67!==r)return!1;if(-37&n)return!1}return!0},encrypt:(t,e,r)=>Bn.encodeCheck(((t,e,r)=>{if(32!==t.length)throw new tn(32,t.length);var n=Mn(t,e),i=H.from(r,"utf8"),o=_n.hash256(n).slice(0,4),s=Vr.scryptSync(i,o,64,In),u=s.slice(0,32),c=s.slice(32,64),f=Gr(u,t),p=a.createCipheriv("aes-256-ecb",c,jn);p.setAutoPadding(!1),p.end(f);var l=p.read(),h=H.allocUnsafe(39);return h.writeUInt8(1,0),h.writeUInt8(66,1),h.writeUInt8(e?224:192,2),o.copy(h,3),l.copy(h,7),h})(t,e,r)),decrypt:(t,e)=>Rn(Bn.decodeCheck(t),e)});class Cn{static signECDSA(e,r){return t.signatureExport(t.sign(e,H.from(r.privateKey,"hex"))).toString("hex")}static verifyECDSA(e,r,n){var i=r instanceof H?r:H.from(r,"hex"),o=t.signatureImport(i);if(!t.isLowS(o))return!1;var a=i.readUInt8(1),s=i.readUInt8(3),u=i.readUInt8(4+s+1);if(i.length!==4+s+2+u||a!==2+s+2+u)return!1;var c=i.readInt8(4),f=i.readInt8(4+s+2);return!(c<0||f<0)&&(!(0===c&&i.readInt8(5)>=0||0===f&&i.readInt8(4+s+2+1)>=0)&&t.verify(e,o,n instanceof H?n:H.from(n,"hex")))}static signSchnorr(e,r){return t.schnorrSign(e,H.from(r.privateKey,"hex")).toString("hex")}static verifySchnorr(e,r,n){return t.schnorrVerify(e,r instanceof H?r:H.from(r,"hex"),n instanceof H?n:H.from(n,"hex"))}}class _n{static ripemd160(t){return e.digest(this.bufferize(t))}static sha1(t){return r.digest(this.bufferize(t))}static sha256(t){if(Array.isArray(t)){var e=n.ctx;for(var r of(e.init(),t))e=e.update(r);return e.final()}return n.digest(this.bufferize(t))}static hash160(t){return i.digest(this.bufferize(t))}static hash256(t){return o.digest(this.bufferize(t))}static bufferize(t){return t instanceof H?t:H.from(t)}}class zn{static fromMnemonic(t,e){return b(S(t,e),Sn.get("network"))}static fromKeys(t,e){if(!t.compressed)throw new TypeError("BIP32 only allows compressed keys.");return w(H.from(t.privateKey,"hex"),e,Sn.get("network"))}static getKeys(t){if(!t.privateKey)throw new Error;return{publicKey:t.publicKey.toString("hex"),privateKey:t.privateKey.toString("hex"),compressed:!0}}static deriveSlip44(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.derivePath("m/44'/".concat(this.slip44).concat(e?"'":""))}static deriveNetwork(t){return this.deriveSlip44(t).deriveHardened(Sn.get("network.aip20")||1)}}zn.slip44=111;var Ln=t=>{for(var e=Sn.get("milestones"),r=e.length-1;r>=0;r--){var n=e[r];if(n.height<=t&&n.blocktime)return n.blocktime}throw new Error("No milestones specifying any height were found")};class Nn{static getTime(t){void 0===t&&(t=E().valueOf());var e=E(Sn.getMilestone(1).epoch).valueOf();return Math.floor((t-e)/1e3)}static getTimeInMsUntilNextSlot(t){return 1e3*(this.getSlotTime(t,this.getNextSlot(t))-this.getTime())}static getSlotNumber(t,e,r){void 0===e&&(e=this.getTime());var n=this.getLatestHeight(r);return this.getSlotInfo(t,e,n).slotNumber}static getSlotTime(t,e,r){var n=this.getLatestHeight(r);return this.calculateSlotTime(e,n,t)}static getNextSlot(t){return this.getSlotNumber(t)+1}static isForgingAllowed(t,e,r){void 0===e&&(e=this.getTime());var n=this.getLatestHeight(r);return this.getSlotInfo(t,e,n).forgingStatus}static getSlotInfo(t,e,r){void 0===e&&(e=this.getTime()),r=this.getLatestHeight(r);for(var n=Ln(1),i=0,o=0,a=1,s=Sn.getNextMilestoneWithNewKey(1,"blocktime"),u=0;u<this.getMilestonesWhichAffectBlockTimes().length-1&&!(r<s.height);u++){var c=t(a);o=t(s.height-1)+n,i+=Math.floor((o-c)/n),n=s.data,a=s.height,s=Sn.getNextMilestoneWithNewKey(s.height,"blocktime")}var f=Math.floor((e-o)/n),p=o+f*n;return{blockTime:n,startTime:p,endTime:p+n-1,slotNumber:i+f,forgingStatus:e<p+Math.floor(n/2)}}static getMilestonesWhichAffectBlockTimes(){for(var t=[{found:!0,height:1,data:Sn.getMilestone(1).blocktime}],e=Sn.getNextMilestoneWithNewKey(1,"blocktime");e.found;)t.push(e),e=Sn.getNextMilestoneWithNewKey(e.height,"blocktime");return t}static calculateSlotTime(t,e,r){for(var n=Ln(1),i=0,o=1,a=0,s=Sn.getNextMilestoneWithNewKey(1,"blocktime"),u=0;u<this.getMilestonesWhichAffectBlockTimes().length-1&&!(e<s.height);u++){var c=r(o);a=r(s.height-1)+n,i+=Math.floor((a-c)/n),n=s.data,o=s.height,s=Sn.getNextMilestoneWithNewKey(s.height,"blocktime")}return a+(t-i)*n}static getLatestHeight(t){if(!t){var e=Sn.getHeight();return e||1}return t}}var Dn,Kn=Object.freeze({__proto__:null,bip38:Fn,Hash:Cn,HashAlgorithms:_n,HDWallet:zn,Message:class{static sign(t,e){var r=Pn.fromPassphrase(e);return{publicKey:r.publicKey,signature:Cn.signECDSA(this.createHash(t),r),message:t}}static signWithWif(t,e,r){r||(r=Sn.get("network"));var n=Pn.fromWIF(e,r);return{publicKey:n.publicKey,signature:Cn.signECDSA(this.createHash(t),n),message:t}}static verify(t){var{message:e,publicKey:r,signature:n}=t;return Cn.verifyECDSA(this.createHash(e),n,r)}static createHash(t){return _n.sha256(t)}},Slots:Nn}),Hn=Object.freeze({__proto__:null,SATOSHI:1e8,ARKTOSHI:1e8});function qn(){return"/tmp"}var $n,Gn,Vn,Wn,Yn,Zn,Jn={EOL:"\n",tmpdir:qn,tmpDir:qn,networkInterfaces:function(){},getNetworkInterfaces:function(){},release:function(){return void 0!==B.navigator?B.navigator.appVersion:""},type:function(){return"Browser"},cpus:function(){return[]},totalmem:function(){return Number.MAX_VALUE},freemem:function(){return Number.MAX_VALUE},uptime:function(){return 0},loadavg:function(){return[]},hostname:function(){return void 0!==B.location?B.location.hostname:""},endianness:function(){if(void 0===Dn){var t=new ArrayBuffer(2),e=new Uint8Array(t),r=new Uint16Array(t);if(e[0]=1,e[1]=2,258===r[0])Dn="BE";else{if(513!==r[0])throw new Error("unable to figure out endianess");Dn="LE"}}return Dn}},Xn=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var r=x(t);if("loopback"===r.range()||t.startsWith("0")||["127.0.0.1","::ffff:127.0.0.1"].includes(t))return!0;if(e){var n=Jn.networkInterfaces();return Object.keys(n).some(e=>n[e].some(e=>e.address===t))}return!1}catch(t){return!1}},Qn=t=>{try{return k(t).toString()}catch(t){return}},ti=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Qn(t.ip);return!!r&&(t.ip=r,!Xn(t.ip,e))},ei=t=>{if(!t)return!1;var e=Sn.get("network.pubKeyHash");return Gn&&Vn===e||(Vn=e,Gn=[...Sn.get("exceptions.blocks")||[],...Sn.get("exceptions.transactions")||[]].reduce((t,e)=>Object.assign(t,{[e]:!0}),{})),!!Gn[t]},ri=t=>{if("string"!=typeof t.id)return!1;if(t.id.length<64){var e=(Sn.get("exceptions.blocksTransactions")||{})[t.id],r=t.transactions||[];if(!e||e.length!==r.length)return!1;e.sort();for(var n=r.map(t=>t.id).sort(),i=0;i<e.length;i++)if(n[i]!==e[i])return!1}return ei(t.id)},ni=t=>{var e=Sn.get("network.pubKeyHash");return $n&&Vn===e||(Vn=e,$n=Sn.get("genesisBlock.transactions").reduce((t,e)=>Object.assign(t,{[e.id]:!0}),{})),$n[t]},ii=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=Number(t).toString(16);return"0".repeat(e-r.length)+r},oi=t=>Sn.getMilestone(t).vendorFieldLength,ai=t=>{var e=Sn.getMilestone().aip11;return(!e||2===t)&&!(!e&&1!==t)},si=Object.freeze({__proto__:null,formatSatoshi:t=>{var e=(+t/1e8).toLocaleString("en",{minimumFractionDigits:0,maximumFractionDigits:8});return"".concat(e," ").concat(Sn.get("network.client.symbol"))},isIdException:ei,isException:ri,isGenesisTransaction:ni,numberToHex:ii,maxVendorFieldLength:oi,isSupportedTransactionVersion:ai,Base58:Bn,BigNumber:A,isValidPeer:ti,isLocalHost:Xn,calculateBlockTime:Ln,isNewBlockTime:t=>{if(1===t)return!0;for(var e,r=Sn.get("milestones"),n=r.length-1;n>=0;n--){var i=r[n];if(!(i.height>t)){if(e&&i.blocktime!==e.blocktime)break;i.blocktime&&(e=i)}}return!!e&&t-e.height==0}});function ui(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}!function(t){t[t.Transfer=0]="Transfer",t[t.SecondSignature=1]="SecondSignature",t[t.DelegateRegistration=2]="DelegateRegistration",t[t.Vote=3]="Vote",t[t.MultiSignature=4]="MultiSignature",t[t.Ipfs=5]="Ipfs",t[t.MultiPayment=6]="MultiPayment",t[t.DelegateResignation=7]="DelegateResignation",t[t.HtlcLock=8]="HtlcLock",t[t.HtlcClaim=9]="HtlcClaim",t[t.HtlcRefund=10]="HtlcRefund"}(Wn||(Wn={})),function(t){t[t.Test=0]="Test",t[t.Core=1]="Core",t[t.Reserved=1e3]="Reserved"}(Yn||(Yn={})),function(t){t[t.EpochTimestamp=1]="EpochTimestamp",t[t.BlockHeight=2]="BlockHeight"}(Zn||(Zn={}));var ci=Object.freeze({__proto__:null,get TransactionType(){return Wn},get TransactionTypeGroup(){return Yn},get HtlcLockExpirationType(){return Zn}}),fi={anyOf:[{required:["id","signature"]},{required:["id","signature","signatures"]},{required:["id","signatures"]}]},pi={additionalProperties:!1},li={$id:void 0,type:"object",if:{properties:{version:{anyOf:[{type:"null"},{const:1}]}}},then:{required:["type","senderPublicKey","fee","amount","timestamp"]},else:{required:["type","senderPublicKey","fee","amount","nonce"]},properties:{id:{anyOf:[{$ref:"transactionId"},{type:"null"}]},version:{enum:[1,2]},network:{$ref:"networkByte"},timestamp:{type:"integer",minimum:0},nonce:{bignumber:{minimum:0}},typeGroup:{type:"integer",minimum:0},amount:{bignumber:{minimum:1,bypassGenesis:!0}},fee:{bignumber:{minimum:0,bypassGenesis:!0}},senderPublicKey:{$ref:"publicKey"},signature:{$ref:"alphanumeric"},secondSignature:{$ref:"alphanumeric"},signSignature:{$ref:"alphanumeric"},signatures:{type:"array",minItems:1,maxItems:16,additionalItems:!1,uniqueItems:!0,items:{allOf:[{minLength:130,maxLength:130},{$ref:"alphanumeric"}]}}}},hi=(t,e)=>l(t,e),di=t=>{var e=hi(t,fi);return e.$id="".concat(t.$id,"Signed"),e},yi=t=>{var e=di(t),r=hi(e,pi);return r.$id="".concat(t.$id,"Strict"),r},gi=hi(li,{$id:"transfer",required:["recipientId"],properties:{type:{transactionType:Wn.Transfer},fee:{bignumber:{minimum:1,bypassGenesis:!0}},vendorField:{anyOf:[{type:"null"},{type:"string",format:"vendorField"}]},recipientId:{$ref:"address"},expiration:{type:"integer",minimum:0}}}),mi=hi(li,{$id:"secondSignature",required:["asset"],properties:{type:{transactionType:Wn.SecondSignature},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:1}},secondSignature:{type:"null"},asset:{type:"object",required:["signature"],properties:{signature:{type:"object",required:["publicKey"],properties:{publicKey:{$ref:"publicKey"}}}}}}}),vi=hi(li,{$id:"delegateRegistration",required:["asset"],properties:{type:{transactionType:Wn.DelegateRegistration},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:1,bypassGenesis:!0}},asset:{type:"object",required:["delegate"],properties:{delegate:{type:"object",required:["username"],properties:{username:{$ref:"delegateUsername"}}}}}}}),bi=hi(li,{$id:"vote",required:["asset"],properties:{type:{transactionType:Wn.Vote},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:1}},recipientId:{$ref:"address"},asset:{type:"object",required:["votes"],properties:{votes:{type:"array",minItems:1,maxItems:2,additionalItems:!1,items:{$ref:"walletVote"}}}}}}),wi=hi(li,{$id:"multiSignature",required:["asset","signatures"],properties:{type:{transactionType:Wn.MultiSignature},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:1}},asset:{type:"object",required:["multiSignature"],properties:{multiSignature:{type:"object",required:["min","publicKeys"],properties:{min:{type:"integer",minimum:1,maximum:{$data:"1/publicKeys/length"}},publicKeys:{type:"array",minItems:1,maxItems:16,additionalItems:!1,uniqueItems:!0,items:{$ref:"publicKey"}}}}}},signatures:{type:"array",minItems:{$data:"1/asset/multiSignature/min"},maxItems:{$data:"1/asset/multiSignature/publicKeys/length"},additionalItems:!1,uniqueItems:!0,items:{allOf:[{minLength:130,maxLength:130},{$ref:"alphanumeric"}]}}}}),Si=hi(li,{});delete Si.properties.signatures;var Ei=hi(Si,{$id:"multiSignatureLegacy",required:["asset"],properties:{version:{anyOf:[{type:"null"},{const:1}]},type:{transactionType:Wn.MultiSignature},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:1}},asset:{type:"object",required:["multiSignatureLegacy"],properties:{multiSignatureLegacy:{type:"object",required:["keysgroup","min","lifetime"],properties:{min:{type:"integer",minimum:1,maximum:{$data:"1/keysgroup/length"}},lifetime:{type:"integer",minimum:1,maximum:72},keysgroup:{type:"array",minItems:1,maxItems:16,additionalItems:!1,items:{allOf:[{type:"string",minimum:67,maximum:67,transform:["toLowerCase"]}]}}}}}},signatures:{type:"array",minItems:1,maxItems:1,additionalItems:!1,items:{$ref:"alphanumeric"}}}}),Ai=hi(li,{$id:"ipfs",properties:{type:{transactionType:Wn.Ipfs},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:1}},asset:{type:"object",required:["ipfs"],properties:{ipfs:{allOf:[{minLength:2,maxLength:90},{$ref:"base58"}]}}}}}),xi=hi(li,{$id:"htlcLock",properties:{type:{transactionType:Wn.HtlcLock},amount:{bignumber:{minimum:1}},fee:{bignumber:{minimum:1}},recipientId:{$ref:"address"},vendorField:{anyOf:[{type:"null"},{type:"string",format:"vendorField"}]},asset:{type:"object",required:["lock"],properties:{lock:{type:"object",required:["secretHash","expiration"],properties:{secretHash:{allOf:[{minLength:64,maxLength:64},{$ref:"hex"}]},expiration:{type:"object",required:["type","value"],properties:{type:{enum:[1,2]},value:{type:"integer",minimum:0}}}}}}}}}),ki=hi(li,{$id:"htlcClaim",properties:{type:{transactionType:Wn.HtlcClaim},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:0,maximum:0}},asset:{type:"object",required:["claim"],properties:{claim:{type:"object",required:["lockTransactionId","unlockSecret"],properties:{lockTransactionId:{$ref:"transactionId"},unlockSecret:{allOf:[{minLength:64,maxLength:64},{$ref:"hex"}]}}}}}}}),Oi=hi(li,{$id:"htlcRefund",properties:{type:{transactionType:Wn.HtlcRefund},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:0,maximum:0}},asset:{type:"object",required:["refund"],properties:{refund:{type:"object",required:["lockTransactionId"],properties:{lockTransactionId:{$ref:"transactionId"}}}}}}}),Pi=hi(li,{$id:"multiPayment",properties:{type:{transactionType:Wn.MultiPayment},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:1}},vendorField:{anyOf:[{type:"null"},{type:"string",format:"vendorField"}]},asset:{type:"object",required:["payments"],properties:{payments:{type:"array",minItems:2,additionalItems:!1,uniqueItems:!1,items:{type:"object",required:["amount","recipientId"],properties:{amount:{bignumber:{minimum:1}},recipientId:{$ref:"address"}}}}}}}}),Ti=hi(li,{$id:"delegateResignation",properties:{type:{transactionType:Wn.DelegateResignation},amount:{bignumber:{minimum:0,maximum:0}},fee:{bignumber:{minimum:1}}}}),Bi=Object.freeze({__proto__:null,transactionBaseSchema:li,extend:hi,signedSchema:di,strictSchema:yi,transfer:gi,secondSignature:mi,delegateRegistration:vi,vote:bi,multiSignature:wi,multiSignatureLegacy:Ei,ipfs:Ai,htlcLock:xi,htlcClaim:ki,htlcRefund:Oi,multiPayment:Pi,delegateResignation:Ti}),Ii=[t=>{t.addFormat("vendorField",t=>{try{return H.from(t,"utf8").length<=oi()}catch(t){return!1}})},t=>{t.addFormat("peer",t=>{try{return ti({ip:t},!1)}catch(t){return!1}})}],ji=[t=>{P.get("instanceof").definition.CONSTRUCTORS.BigNumber=A,t.addKeyword("bignumber",{compile:t=>(e,r,n,i)=>{var o,a=void 0!==t.minimum?t.minimum:0,s=void 0!==t.maximum?t.maximum:"9223372036854775807";if(0!==e&&!e)return!1;try{o=A.make(e)}catch(t){return!1}n&&i&&(n[i]=o);var u=!1;return t.bypassGenesis&&n.id&&(u=t.block?1===n.height:ni(n.id)),!!(!o.isLessThan(a)||o.isZero()&&u)&&!(o.isGreaterThan(s)&&!u)},errors:!1,modifying:!0,metaSchema:{type:"object",properties:{minimum:{type:"integer"},maximum:{type:"integer"},bypassGenesis:{type:"boolean"},block:{type:"boolean"}},additionalItems:!1}})},t=>{t.addKeyword("blockId",{compile:t=>(e,r,n)=>{if(n&&1===n.height&&t.allowNullWhenGenesis&&(!e||0===Number(e)))return!0;if("string"!=typeof e)return!1;var i=/^[0-9]{1,20}$/.test(e)||/^[0-9a-f]{16}$/i.test(e),o=/^[0-9a-f]{64}$/i.test(e);if(n&&n.height){var a=t.isPreviousBlock?n.height-1:n.height;return Sn.getMilestone(null!=a?a:1).block.idFullSha256?o:i}return i||o},errors:!1,metaSchema:{type:"object",properties:{allowNullWhenGenesis:{type:"boolean"},isPreviousBlock:{type:"boolean"}},additionalItems:!1}})},t=>{t.addKeyword("maxBytes",{type:"string",compile:(t,e)=>r=>"string"===e.type&&H.from(r,"utf8").byteLength<=t,errors:!1,metaSchema:{type:"integer",minimum:0}})},t=>{t.addKeyword("network",{compile:t=>e=>t&&e===Sn.get("network.pubKeyHash"),errors:!1,metaSchema:{type:"boolean"}})},t=>{t.addKeyword("transactionType",{compile:t=>(e,r,n)=>{if(e===Wn.MultiPayment&&n&&(!n.typeGroup||1===n.typeGroup)&&n.asset&&n.asset.payments){var i=Sn.getMilestone().multiPaymentLimit||256;return n.asset.payments.length<=i}return e===t},errors:!1,metaSchema:{type:"integer",minimum:0}})}],Ui={hex:{$id:"hex",type:"string",pattern:"^[0123456789A-Fa-f]+$"},base58:{$id:"base58",type:"string",pattern:"^[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]+$"},alphanumeric:{$id:"alphanumeric",type:"string",pattern:"^[a-zA-Z0-9]+$"},transactionId:{$id:"transactionId",allOf:[{minLength:64,maxLength:64},{$ref:"hex"}]},networkByte:{$id:"networkByte",network:!0},address:{$id:"address",allOf:[{minLength:34,maxLength:34},{$ref:"base58"}]},publicKey:{$id:"publicKey",allOf:[{minLength:66,maxLength:66},{$ref:"hex"},{transform:["toLowerCase"]}]},walletVote:{$id:"walletVote",allOf:[{type:"string",pattern:"^[+|-][a-zA-Z0-9]{66}$"},{transform:["toLowerCase"]}]},username:{$id:"delegateUsername",allOf:[{type:"string",pattern:"^[a-z0-9!@$&_.]+$"},{minLength:1,maxLength:20},{transform:["toLowerCase"]}]},genericName:{$id:"genericName",allOf:[{type:"string",pattern:"^[a-zA-Z0-9]+(( - |[ ._-])[a-zA-Z0-9]+)*[.]?$"},{minLength:1,maxLength:40}]},uri:{$id:"uri",allOf:[{format:"uri"},{minLength:4,maxLength:80}]},blockHeader:{$id:"blockHeader",type:"object",required:["id","timestamp","previousBlock","height","totalAmount","totalFee","reward","generatorPublicKey","blockSignature"],properties:{id:{blockId:{}},idHex:{blockId:{}},version:{type:"integer",minimum:0},timestamp:{type:"integer",minimum:0},previousBlock:{blockId:{allowNullWhenGenesis:!0,isPreviousBlock:!0}},previousBlockHex:{blockId:{allowNullWhenGenesis:!0,isPreviousBlock:!0}},height:{type:"integer",minimum:1},numberOfTransactions:{type:"integer"},totalAmount:{bignumber:{minimum:0,bypassGenesis:!0,block:!0}},totalFee:{bignumber:{minimum:0,bypassGenesis:!0,block:!0}},reward:{bignumber:{minimum:0}},payloadLength:{type:"integer",minimum:0},payloadHash:{$ref:"hex"},generatorPublicKey:{$ref:"publicKey"},blockSignature:{$ref:"hex"}}},block:{$id:"block",$ref:"blockHeader",properties:{transactions:{$ref:"transactions",minItems:{$data:"1/numberOfTransactions"},maxItems:{$data:"1/numberOfTransactions"}}}}};function Mi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ri(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mi(Object(r),!0).forEach((function(e){ui(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}class Fi{constructor(t){this.transactionSchemas=new Map,this.ajv=this.instantiateAjv(t)}static make(){return new Fi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getInstance(){return this.ajv}validate(t,e){return this.validateSchema(this.ajv,t,e)}validateException(t,e){var r=this.instantiateAjv({allErrors:!0,verbose:!0});for(var n of this.transactionSchemas.values())this.extendTransactionSchema(r,n);return this.validateSchema(r,t,e)}addFormat(t,e){this.ajv.addFormat(t,e)}addKeyword(t,e){this.ajv.addKeyword(t,e)}addSchema(t,e){this.ajv.addSchema(t,e)}removeKeyword(t){this.ajv.removeKeyword(t)}removeSchema(t){this.ajv.removeSchema(t)}extendTransaction(t,e){this.extendTransactionSchema(this.ajv,t,e)}validateSchema(t,e,r){try{var n;return t.validate(e,r),{value:r,error:t.errors?t.errorsText():void 0,errors:t.errors||void 0}}catch(n){return{value:void 0,error:n.stack,errors:[]}}}instantiateAjv(t){var e=new O(Ri(Ri({},{$data:!0,schemas:Ui,removeAdditional:!0,extendRefs:!0}),t));for(var r of(P(e),ji))r(e);for(var n of Ii)n(e);return e}extendTransactionSchema(t,e,r){t.getSchema(e.$id)&&(r=!0),r&&(this.transactionSchemas.delete(e.$id),t.removeSchema(e.$id),t.removeSchema("".concat(e.$id,"Signed")),t.removeSchema("".concat(e.$id,"Strict"))),this.transactionSchemas.set(e.$id,e),t.addSchema(e),t.addSchema(di(e)),t.addSchema(yi(e)),this.updateTransactionArray(t)}updateTransactionArray(t){t.removeSchema("block"),t.removeSchema("transactions"),t.addSchema({$id:"transactions",type:"array",additionalItems:!1,items:{anyOf:[...this.transactionSchemas.keys()].map(t=>({$ref:"".concat(t,"Signed")}))}}),t.addSchema(Ui.block)}}var Ci=Fi.make(),_i=Object.freeze({__proto__:null,Validator:Fi,validator:Ci});class zi{constructor(t,e){this.type=t,this.typeGroup=e}static from(t,e){void 0===e&&(e=Yn.Core);var r="".concat(e,"-").concat(t);return this.types.has(r)||this.types.set(r,new zi(t,e)),this.types.get(r)}toString(){return this.typeGroup===Yn.Core?"Core/".concat(this.type):"".concat(this.typeGroup,"/").concat(this.type)}}zi.types=new Map;class Li{static initialize(t){this.transactionTypes=t}static create(t){var e=new(this.get(t.type,t.typeGroup,t.version));return e.data=t,e.data.version=t.version||1,e}static get(t,e,r){var n,i=zi.from(t,e);if(!this.transactionTypes.has(i))throw new an(i.toString());var o=null===(n=this.transactionTypes.get(i))||void 0===n?void 0:n.get(r||1);return null!=o?o:[...this.transactionTypes.get(i).values()][0]}}class Ni{static getBytes(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.version||1;if(e.acceptLegacyVersion||e.disableVersionCheck||ai(r))return 1===r?this.getBytesV1(t,e):this.serialize(Li.create(t),e);throw new on(r)}static serialize(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new T(512,!0);this.serializeCommon(t.data,r),this.serializeVendorField(t,r);var n=t.serialize(e);if(!n)throw new Error;var i=n.flip();r.append(i),this.serializeSignatures(t.data,r,e);var o=r.flip().toBuffer();return t.serialized=o,o}static getBytesV1(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;if(t.type===Wn.SecondSignature&&t.asset){var{signature:i}=t.asset,o=new T(33,!0);if(i&&i.publicKey){var a=H.from(i.publicKey,"hex");for(var s of a)o.writeByte(s)}o.flip(),n=(e=new Uint8Array(o.toArrayBuffer())).length}if(t.type===Wn.DelegateRegistration&&t.asset&&t.asset.delegate&&(n=(e=H.from(t.asset.delegate.username,"utf8")).length),t.type===Wn.Vote&&t.asset&&t.asset.votes&&(n=(e=H.from(t.asset.votes.join(""),"utf8")).length),t.type===Wn.MultiSignature&&t.asset&&t.asset.multiSignatureLegacy){var u=H.from(t.asset.multiSignatureLegacy.keysgroup.join(""),"utf8"),c=new T(2+u.length,!0);for(var f of(c.writeByte(t.asset.multiSignatureLegacy.min),c.writeByte(t.asset.multiSignatureLegacy.lifetime),u))c.writeByte(f);c.flip(),(e=c.toBuffer())&&(n=e.length)}var p=new T(266+n,!0);if(p.writeByte(t.type),p.writeInt(t.timestamp),t.senderPublicKey){var l=H.from(t.senderPublicKey,"hex");for(var h of l)p.writeByte(h);var{transactionIdFixTable:d}=Sn.get("exceptions");if(d&&Object.values(d).includes(t.id)||t.recipientId&&1!==t.type&&4!==t.type){var y=t.recipientId||On.fromPublicKey(t.senderPublicKey,t.network),g=On.toBuffer(y).addressBuffer;for(var m of g)p.writeByte(m)}else for(var v=0;v<21;v++)p.writeByte(0)}if(t.vendorField){for(var b=H.from(t.vendorField),w=b.length,S=0;S<w;S++)p.writeByte(b[S]);for(var E=w;E<64;E++)p.writeByte(0)}else for(var A=0;A<64;A++)p.writeByte(0);if(p.writeInt64(t.amount.toString()),p.writeInt64(t.fee.toString()),n>0&&e)for(var x=0;x<n;x++)p.writeByte(e[x]);if(!r.excludeSignature&&t.signature){var k=H.from(t.signature,"hex");for(var O of k)p.writeByte(O)}if(!r.excludeSecondSignature&&t.secondSignature){var P=H.from(t.secondSignature,"hex");for(var B of P)p.writeByte(B)}p.flip();for(var I=new Uint8Array(p.toArrayBuffer()),j=[],U=0;U<I.length;U++)j[U]=I[U];return H.from(j)}static serializeCommon(t,e){t.version=t.version||1,void 0===t.typeGroup&&(t.typeGroup=Yn.Core),e.writeByte(255),e.writeByte(t.version),e.writeByte(t.network||Sn.get("network.pubKeyHash")),1===t.version?(e.writeByte(t.type),e.writeUint32(t.timestamp)):(e.writeUint32(t.typeGroup),e.writeUint16(t.type),t.nonce&&e.writeUint64(t.nonce.toString())),t.senderPublicKey&&e.append(t.senderPublicKey,"hex"),e.writeUint64(t.fee.toString())}static serializeVendorField(t,e){if(t.hasVendorField()){var{data:r}=t;if(r.vendorField){var n=H.from(r.vendorField,"utf8");e.writeByte(n.length),e.append(n)}else e.writeByte(0)}else e.writeByte(0)}static serializeSignatures(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.signature&&!r.excludeSignature&&e.append(t.signature,"hex");var n=t.secondSignature||t.signSignature;n&&!r.excludeSecondSignature&&e.append(n,"hex"),t.signatures&&(1===t.version&&ri(t)?(e.append("ff","hex"),e.append(t.signatures.join(""),"hex")):r.excludeMultiSignature||e.append(t.signatures.join(""),"hex"))}}class Di{static toBytes(t){return Ni.serialize(Li.create(t))}static toHash(t,e){return _n.sha256(Ni.getBytes(t,e))}static getId(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Di.toHash(t,e).toString("hex");if(e.addressError&&!ri({id:r}))throw new en(e.addressError);var{transactionIdFixTable:n}=Sn.get("exceptions");return n&&n[r]?n[r]:r}}class Ki{static verify(t,e){return!!ri(t)||!(Sn.getMilestone().aip11&&(!t.version||1===t.version))&&Ki.verifyHash(t,null==e?void 0:e.disableVersionCheck)}static verifySecondSignature(t,e,r){var n=t.secondSignature||t.signSignature;if(!n)return!1;var i=Di.toHash(t,{disableVersionCheck:null==r?void 0:r.disableVersionCheck,excludeSecondSignature:!0});return this.internalVerifySignature(i,n,e)}static verifySignatures(t,e){if(!e)throw new mn;var{publicKeys:r,min:n}=e,{signatures:i}=t,o=Di.toHash(t,{excludeSignature:!0,excludeSecondSignature:!0,excludeMultiSignature:!0}),a={},s=!1,u=0;if(i)for(var c=0;c<i.length;c++){var f=i[c],p=parseInt(f.slice(0,2),16);if(a[p])throw new vn;a[p]=!0;var l=f.slice(2,130),h=r[p];if(Cn.verifySchnorr(o,l,h)&&u++,u===n){s=!0;break}if(i.length-(c+1-u)<n)break}return s}static verifyHash(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{signature:r,senderPublicKey:n}=t;if(!r||!n)return!1;var i=Di.toHash(t,{disableVersionCheck:e,excludeSignature:!0,excludeSecondSignature:!0});return this.internalVerifySignature(i,r,n)}static verifySchema(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Li.get(t.type,t.typeGroup,t.version);if(!r)throw new Error;var{$id:n}=r.getSchema();return Ci.validate(e?"".concat(n,"Strict"):"".concat(n),t)}static internalVerifySignature(t,e,r){return 64===H.from(e,"hex").byteLength?Cn.verifySchnorr(t,e,r):Cn.verifyECDSA(t,e,r)}}class Hi{constructor(){this.isVerified=!1}static getSchema(){throw new Qr}static staticFee(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Sn.getMilestone(t.height);if(e.fees&&e.fees.staticFees&&this.key){var r=e.fees.staticFees[this.key];if(void 0!==r)return A.make(r)}return this.defaultStaticFee}verify(t){return Ki.verify(this.data,t)}verifySecondSignature(t){return Ki.verifySecondSignature(this.data,t)}verifySchema(){return Ki.verifySchema(this.data)}toJson(){var t=JSON.parse(JSON.stringify(this.data));return t.typeGroup===Yn.Core&&delete t.typeGroup,1===t.version?delete t.nonce:delete t.timestamp,t}toString(){var t=[];return this.data.senderPublicKey&&this.data.nonce?t.push("".concat(On.fromPublicKey(this.data.senderPublicKey),"#").concat(this.data.nonce)):this.data.senderPublicKey&&t.push("".concat(On.fromPublicKey(this.data.senderPublicKey))),this.data.id&&t.push(this.data.id.slice(-8)),t.push("".concat(this.key[0].toUpperCase()).concat(this.key.slice(1)," v").concat(this.data.version)),t.join(" ")}hasVendorField(){return!1}get id(){return this.data.id}get type(){return this.data.type}get typeGroup(){return this.data.typeGroup}get verified(){return this.isVerified}get key(){return this.__proto__.constructor.key}get staticFee(){return this.__proto__.constructor.staticFee({data:this.data})}}Hi.type=void 0,Hi.typeGroup=void 0,Hi.version=1,Hi.key=void 0,Hi.defaultStaticFee=A.ZERO;class qi extends Hi{static getSchema(){return gi}hasVendorField(){return!0}serialize(t){var{data:e}=this,r=new T(24,!0);if(r.writeUint64(e.amount.toString()),r.writeUint32(e.expiration||0),e.recipientId){var{addressBuffer:n,addressError:i}=On.toBuffer(e.recipientId);t&&(t.addressError=i),r.append(n)}return r}deserialize(t){var{data:e}=this;e.amount=A.make(t.readUint64().toString()),e.expiration=t.readUint32(),e.recipientId=On.fromBuffer(t.readBytes(21).toBuffer())}}qi.typeGroup=Yn.Core,qi.type=Wn.Transfer,qi.key="transfer",qi.version=1,qi.defaultStaticFee=A.make("10000000");class $i extends Hi{static getSchema(){return mi}serialize(t){var{data:e}=this,r=new T(33,!0);return e.asset&&e.asset.signature&&r.append(e.asset.signature.publicKey,"hex"),r}deserialize(t){var{data:e}=this;e.asset={signature:{publicKey:t.readBytes(33).toString("hex")}}}}$i.typeGroup=Yn.Core,$i.type=Wn.SecondSignature,$i.key="secondSignature",$i.version=1,$i.defaultStaticFee=A.make("500000000");class Gi extends Hi{static getSchema(){return vi}serialize(t){var{data:e}=this;if(e.asset&&e.asset.delegate){var r=H.from(e.asset.delegate.username,"utf8"),n=new T(r.length,!0);return n.writeByte(r.length),n.append(r,"hex"),n}}deserialize(t){var{data:e}=this,r=t.readUint8();e.asset={delegate:{username:t.readString(r)}}}}Gi.typeGroup=Yn.Core,Gi.type=Wn.DelegateRegistration,Gi.key="delegateRegistration",Gi.version=1,Gi.defaultStaticFee=A.make("2500000000");class Vi extends Hi{static getSchema(){return bi}serialize(t){var{data:e}=this,r=new T(24,!0);if(e.asset&&e.asset.votes){var n=e.asset.votes.map(t=>(t.startsWith("+")?"01":"00")+t.slice(1)).join("");r.writeByte(e.asset.votes.length),r.append(n,"hex")}return r}deserialize(t){var{data:e}=this,r=t.readUint8();e.asset={votes:[]};for(var n=0;n<r;n++){var i=t.readBytes(34).toString("hex");i=("1"===i[1]?"+":"-")+i.slice(2),e.asset&&e.asset.votes&&e.asset.votes.push(i)}}}Vi.typeGroup=Yn.Core,Vi.type=Wn.Vote,Vi.key="vote",Vi.version=1,Vi.defaultStaticFee=A.make("100000000");class Wi extends Hi{static getSchema(){return Ei}static staticFee(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(t=r.data)||void 0===t||null===(e=t.asset)||void 0===e?void 0:e.multiSignatureLegacy)?super.staticFee(r).times(r.data.asset.multiSignatureLegacy.keysgroup.length+1):super.staticFee(r)}verify(){return ri(this.data)}serialize(t){var{data:e}=this,r=e.asset.multiSignatureLegacy,n=r.keysgroup.map(t=>t.startsWith("+")?t.slice(1):t).join(""),i=H.from(n,"hex"),o=new T(i.length+3,!0);return o.writeByte(r.min),o.writeByte(r.keysgroup.length),o.writeByte(r.lifetime),o.append(i,"hex"),o}deserialize(t){var{data:e}=this,r={keysgroup:[],lifetime:0,min:0};r.min=t.readUint8();var n=t.readUint8();r.lifetime=t.readUint8();for(var i=0;i<n;i++){var o=t.readBytes(33).toString("hex");r.keysgroup.push(o)}e.asset={multiSignatureLegacy:r}}}Wi.typeGroup=Yn.Core,Wi.type=Wn.MultiSignature,Wi.key="multiSignature",Wi.version=1,Wi.defaultStaticFee=A.make("500000000");var Yi=Object.freeze({__proto__:null,TransferTransaction:qi,SecondSignatureRegistrationTransaction:$i,DelegateRegistrationTransaction:Gi,VoteTransaction:Vi,MultiSignatureRegistrationTransaction:Wi});class Zi extends qi{}Zi.version=2;class Ji extends $i{}Ji.version=2;class Xi extends Gi{}Xi.version=2;class Qi extends Vi{}Qi.version=2;class to extends Hi{static getSchema(){return wi}static staticFee(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(t=r.data)||void 0===t||null===(e=t.asset)||void 0===e?void 0:e.multiSignature)?super.staticFee(r).times(r.data.asset.multiSignature.publicKeys.length+1):super.staticFee(r)}verify(){return Sn.getMilestone().aip11&&super.verify()}serialize(t){var{data:e}=this,{min:r,publicKeys:n}=e.asset.multiSignature,i=new T(2+33*n.length);for(var o of(i.writeUint8(r),i.writeUint8(n.length),n))i.append(o,"hex");return i}deserialize(t){var{data:e}=this,r={publicKeys:[],min:0};r.min=t.readUint8();for(var n=t.readUint8(),i=0;i<n;i++){var o=t.readBytes(33).toString("hex");r.publicKeys.push(o)}e.asset={multiSignature:r}}}to.typeGroup=Yn.Core,to.type=Wn.MultiSignature,to.key="multiSignature",to.version=2,to.defaultStaticFee=A.make("500000000");class eo extends Hi{static getSchema(){return Ai}verify(){return Sn.getMilestone().aip11&&super.verify()}serialize(t){var{data:e}=this;if(e.asset){var r=m.decode(e.asset.ipfs),n=new T(r.length,!0);return n.append(r,"hex"),n}}deserialize(t){var{data:e}=this,r=t.readUint8(),n=t.readUint8(),i=t.readBytes(n).toBuffer(),o=H.alloc(n+2);o.writeUInt8(r,0),o.writeUInt8(n,1),o.fill(i,2),e.asset={ipfs:m.encode(o)}}}eo.typeGroup=Yn.Core,eo.type=Wn.Ipfs,eo.key="ipfs",eo.version=2,eo.defaultStaticFee=A.make("500000000");class ro extends Hi{static getSchema(){return Pi}verify(){return Sn.getMilestone().aip11&&super.verify()}hasVendorField(){return!0}serialize(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:e}=this;if(e.asset&&e.asset.payments){var r=new T(2+29*e.asset.payments.length,!0);for(var n of(r.writeUint16(e.asset.payments.length),e.asset.payments)){r.writeUint64(n.amount.toString());var{addressBuffer:i,addressError:o}=On.toBuffer(n.recipientId);t.addressError=o||t.addressError,r.append(i)}return r}}deserialize(t){for(var{data:e}=this,r=[],n=t.readUint16(),i=0;i<n;i++)r.push({amount:A.make(t.readUint64().toString()),recipientId:On.fromBuffer(t.readBytes(21).toBuffer())});e.amount=A.ZERO,e.asset={payments:r}}}ro.typeGroup=Yn.Core,ro.type=Wn.MultiPayment,ro.key="multiPayment",ro.version=2,ro.defaultStaticFee=A.make("10000000");class no extends Hi{static getSchema(){return Ti}verify(){return Sn.getMilestone().aip11&&super.verify()}serialize(t){return new T(0)}deserialize(t){}}no.typeGroup=Yn.Core,no.type=Wn.DelegateResignation,no.key="delegateResignation",no.version=2,no.defaultStaticFee=A.make("2500000000");class io extends Hi{static getSchema(){return xi}verify(){var t=Sn.getMilestone();return!0===t.aip11&&!0===t.htlcEnabled&&super.verify()}hasVendorField(){return!0}serialize(t){var{data:e}=this,r=new T(66,!0);return r.writeUint64(e.amount.toString()),e.asset&&e.asset.lock&&(r.append(H.from(e.asset.lock.secretHash,"hex")),r.writeUint8(e.asset.lock.expiration.type),r.writeUint32(e.asset.lock.expiration.value)),e.recipientId&&r.append(On.toBuffer(e.recipientId).addressBuffer),r}deserialize(t){var{data:e}=this,r=A.make(t.readUint64().toString()),n=t.readBytes(32).toString("hex"),i=t.readUint8(),o=t.readUint32(),a=On.fromBuffer(t.readBytes(21).toBuffer());e.amount=r,e.recipientId=a,e.asset={lock:{secretHash:n,expiration:{type:i,value:o}}}}}io.typeGroup=Yn.Core,io.type=Wn.HtlcLock,io.key="htlcLock",io.version=2,io.defaultStaticFee=A.make("10000000");class oo extends Hi{static getSchema(){return ki}verify(){var t=Sn.getMilestone();return!0===t.aip11&&!0===t.htlcEnabled&&super.verify()}serialize(t){var{data:e}=this,r=new T(64,!0);return e.asset&&e.asset.claim&&(r.append(H.from(e.asset.claim.lockTransactionId,"hex")),r.append(H.from(e.asset.claim.unlockSecret,"hex"))),r}deserialize(t){var{data:e}=this,r=t.readBytes(32).toString("hex"),n=t.readBytes(32).toString("hex");e.asset={claim:{lockTransactionId:r,unlockSecret:n}}}}oo.typeGroup=Yn.Core,oo.type=Wn.HtlcClaim,oo.key="htlcClaim",oo.version=2,oo.defaultStaticFee=A.ZERO;class ao extends Hi{static getSchema(){return Oi}verify(){var t=Sn.getMilestone();return!0===t.aip11&&!0===t.htlcEnabled&&super.verify()}serialize(t){var{data:e}=this,r=new T(32,!0);return e.asset&&e.asset.refund&&r.append(H.from(e.asset.refund.lockTransactionId,"hex")),r}deserialize(t){var{data:e}=this,r=t.readBytes(32).toString("hex");e.asset={refund:{lockTransactionId:r}}}}ao.typeGroup=Yn.Core,ao.type=Wn.HtlcRefund,ao.key="htlcRefund",ao.version=2,ao.defaultStaticFee=A.ZERO;var so=Object.freeze({__proto__:null,TransferTransaction:Zi,SecondSignatureRegistrationTransaction:Ji,DelegateRegistrationTransaction:Xi,VoteTransaction:Qi,MultiSignatureRegistrationTransaction:to,IpfsTransaction:eo,MultiPaymentTransaction:ro,DelegateResignationTransaction:no,HtlcLockTransaction:io,HtlcClaimTransaction:oo,HtlcRefundTransaction:ao});function uo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}class co{static sign(t,e,r){(!r||void 0===r.excludeSignature&&void 0===r.excludeSecondSignature)&&(r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uo(Object(r),!0).forEach((function(e){ui(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({excludeSignature:!0,excludeSecondSignature:!0},r));var n=Di.toHash(t,r),i=t.version&&t.version>1?Cn.signSchnorr(n,e):Cn.signECDSA(n,e);return t.signature||r.excludeMultiSignature||(t.signature=i),i}static secondSign(t,e){var r=Di.toHash(t,{excludeSecondSignature:!0}),n=t.version&&t.version>1?Cn.signSchnorr(r,e):Cn.signECDSA(r,e);return t.secondSignature||(t.secondSignature=n),n}static multiSign(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;t.signatures||(t.signatures=[]),r=-1===r?t.signatures.length:r;var n=Di.toHash(t,{excludeSignature:!0,excludeSecondSignature:!0,excludeMultiSignature:!0}),i=Cn.signSchnorr(n,e),o="".concat(ii(r)).concat(i);return t.signatures.push(o),o}}function fo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function po(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(r),!0).forEach((function(e){ui(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}class lo{constructor(){this.signWithSenderAsRecipient=!1,this.disableVersionCheck=!1,this.data={id:void 0,timestamp:Nn.getTime(),typeGroup:Yn.Test,nonce:A.ZERO,version:Sn.getMilestone().aip11?2:1}}build(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Po.fromData(po(po({},this.data),t),!1,{disableVersionCheck:this.disableVersionCheck})}version(t){return this.data.version=t,this.disableVersionCheck=!0,this.instance()}typeGroup(t){return this.data.typeGroup=t,this.instance()}nonce(t){return t&&(this.data.nonce=A.make(t)),this.instance()}network(t){return this.data.network=t,this.instance()}fee(t){return t&&(this.data.fee=A.make(t)),this.instance()}amount(t){return this.data.amount=A.make(t),this.instance()}recipientId(t){return this.data.recipientId=t,this.instance()}senderPublicKey(t){return this.data.senderPublicKey=t,this.instance()}vendorField(t){var e=oi();if(t){if(H.from(t).length>e)throw new ln(e);this.data.vendorField=t}return this.instance()}sign(t){var e=Pn.fromPassphrase(t);return this.signWithKeyPair(e)}signWithWif(t,e){var r=Pn.fromWIF(t,{wif:e||Sn.get("network.wif")});return this.signWithKeyPair(r)}secondSign(t){return this.secondSignWithKeyPair(Pn.fromPassphrase(t))}secondSignWithWif(t,e){var r=Pn.fromWIF(t,{wif:e||Sn.get("network.wif")});return this.secondSignWithKeyPair(r)}multiSign(t,e){var r=Pn.fromPassphrase(t);return this.multiSignWithKeyPair(e,r)}multiSignWithWif(t,e,r){var n=Pn.fromWIF(e,{wif:r||Sn.get("network.wif")});return this.multiSignWithKeyPair(t,n)}verify(){return Ki.verifyHash(this.data,this.disableVersionCheck)}getStruct(){if(!this.data.senderPublicKey||!this.data.signature&&!this.data.signatures)throw new hn;var t={id:Di.getId(this.data).toString(),signature:this.data.signature,secondSignature:this.data.secondSignature,version:this.data.version,type:this.data.type,fee:this.data.fee,senderPublicKey:this.data.senderPublicKey,network:this.data.network};return 1===this.data.version?t.timestamp=this.data.timestamp:(t.typeGroup=this.data.typeGroup,t.nonce=this.data.nonce),Array.isArray(this.data.signatures)&&(t.signatures=this.data.signatures),t}signWithKeyPair(t){return this.data.senderPublicKey=t.publicKey,this.signWithSenderAsRecipient&&(this.data.recipientId=On.fromPublicKey(t.publicKey,this.data.network)),this.data.signature=co.sign(this.getSigningObject(),t,{disableVersionCheck:this.disableVersionCheck}),this.instance()}secondSignWithKeyPair(t){return this.data.secondSignature=co.secondSign(this.getSigningObject(),t),this.instance()}multiSignWithKeyPair(t,e){return this.data.signatures||(this.data.signatures=[]),this.version(2),co.multiSign(this.getSigningObject(),e,t),this.instance()}getSigningObject(){var t=po({},this.data);for(var e of Object.keys(t))["model","network","id"].includes(e)&&delete t[e];return t}}class ho extends lo{constructor(){super(),this.data.type=Xi.type,this.data.typeGroup=Xi.typeGroup,this.data.fee=Xi.staticFee(),this.data.amount=A.ZERO,this.data.recipientId=void 0,this.data.senderPublicKey=void 0,this.data.asset={delegate:{}}}usernameAsset(t){return this.data.asset&&this.data.asset.delegate&&(this.data.asset.delegate.username=t),this}getStruct(){var t=super.getStruct();return t.amount=this.data.amount,t.recipientId=this.data.recipientId,t.asset=this.data.asset,t}instance(){return this}}class yo extends lo{constructor(){super(),this.data.type=no.type,this.data.typeGroup=no.typeGroup,this.data.version=2,this.data.fee=no.staticFee(),this.data.amount=A.ZERO,this.data.senderPublicKey=void 0}getStruct(){var t=super.getStruct();return t.amount=this.data.amount,t}instance(){return this}}class go extends lo{constructor(){super(),this.data.type=oo.type,this.data.typeGroup=oo.typeGroup,this.data.fee=oo.staticFee(),this.data.amount=A.ZERO,this.data.asset={}}htlcClaimAsset(t){return this.data.asset={claim:t},this}getStruct(){var t=super.getStruct();return t.amount=this.data.amount,t.asset=this.data.asset,t}instance(){return this}}class mo extends lo{constructor(){super(),this.data.type=io.type,this.data.typeGroup=io.typeGroup,this.data.recipientId=void 0,this.data.amount=A.ZERO,this.data.fee=io.staticFee(),this.data.vendorField=void 0,this.data.asset={}}htlcLockAsset(t){return this.data.asset={lock:t},this}getStruct(){var t=super.getStruct();return t.recipientId=this.data.recipientId,t.amount=this.data.amount,t.vendorField=this.data.vendorField,t.asset=this.data.asset,t}expiration(t){return this}instance(){return this}}class vo extends lo{constructor(){super(),this.data.type=ao.type,this.data.typeGroup=ao.typeGroup,this.data.fee=ao.staticFee(),this.data.amount=A.ZERO,this.data.asset={}}htlcRefundAsset(t){return this.data.asset={refund:t},this}getStruct(){var t=super.getStruct();return t.amount=this.data.amount,t.asset=this.data.asset,t}instance(){return this}}class bo extends lo{constructor(){super(),this.data.type=eo.type,this.data.typeGroup=eo.typeGroup,this.data.fee=eo.staticFee(),this.data.amount=A.ZERO,this.data.asset={}}ipfsAsset(t){return this.data.asset={ipfs:t},this}getStruct(){var t=super.getStruct();return t.amount=this.data.amount,t.asset=this.data.asset,t}instance(){return this}}class wo extends lo{constructor(){super(),this.data.type=ro.type,this.data.typeGroup=ro.typeGroup,this.data.fee=ro.staticFee(),this.data.vendorField=void 0,this.data.asset={payments:[]},this.data.amount=A.make(0)}addPayment(t,e){if(this.data.asset&&this.data.asset.payments){var r=Sn.getMilestone().multiPaymentLimit||256;if(this.data.asset.payments.length>=r)throw new fn(r);this.data.asset.payments.push({amount:A.make(e),recipientId:t})}return this}getStruct(){if(!this.data.asset||!this.data.asset.payments||!Array.isArray(this.data.asset.payments)||this.data.asset.payments.length<=1)throw new pn;var t=super.getStruct();return t.senderPublicKey=this.data.senderPublicKey,t.vendorField=this.data.vendorField,t.amount=this.data.amount,t.asset=this.data.asset,t}instance(){return this}}class So extends lo{constructor(){super(),this.data.type=to.type,this.data.typeGroup=to.typeGroup,this.data.version=2,this.data.fee=A.ZERO,this.data.amount=A.ZERO,this.data.recipientId=void 0,this.data.senderPublicKey=void 0,this.data.asset={multiSignature:{min:0,publicKeys:[]}}}participant(t){if(this.data.asset&&this.data.asset.multiSignature){var{publicKeys:e}=this.data.asset.multiSignature;e.length<=16&&(e.push(t),this.data.fee=to.staticFee({data:this.data}))}return this}min(t){return this.data.asset&&this.data.asset.multiSignature&&(this.data.asset.multiSignature.min=t),this}multiSignatureAsset(t){return this.data.asset&&this.data.asset.multiSignature&&(this.data.asset.multiSignature=t,this.data.fee=to.staticFee({data:this.data})),this}getStruct(){var t=super.getStruct();return t.amount=this.data.amount,t.recipientId=this.data.recipientId,t.asset=this.data.asset,t}instance(){return this}}class Eo extends lo{constructor(){super(),this.data.type=Ji.type,this.data.typeGroup=Ji.typeGroup,this.data.fee=Ji.staticFee(),this.data.amount=A.ZERO,this.data.recipientId=void 0,this.data.senderPublicKey=void 0,this.data.asset={signature:{}}}signatureAsset(t){return this.data.asset&&this.data.asset.signature&&(this.data.asset.signature.publicKey=Pn.fromPassphrase(t).publicKey),this}getStruct(){var t=super.getStruct();return t.amount=this.data.amount,t.recipientId=this.data.recipientId,t.asset=this.data.asset,t}instance(){return this}}class Ao extends lo{constructor(){super(),this.data.type=Zi.type,this.data.typeGroup=Zi.typeGroup,this.data.fee=Zi.staticFee(),this.data.amount=A.ZERO,this.data.recipientId=void 0,this.data.senderPublicKey=void 0,this.data.expiration=0}expiration(t){return this.data.expiration=t,this.instance()}getStruct(){var t=super.getStruct();return t.amount=this.data.amount,t.recipientId=this.data.recipientId,t.asset=this.data.asset,t.vendorField=this.data.vendorField,t.expiration=this.data.expiration,t}instance(){return this}}class xo extends lo{constructor(){super(),this.data.type=Qi.type,this.data.typeGroup=Qi.typeGroup,this.data.fee=Qi.staticFee(),this.data.amount=A.ZERO,this.data.recipientId=void 0,this.data.senderPublicKey=void 0,this.data.asset={votes:[]},this.signWithSenderAsRecipient=!0}votesAsset(t){return this.data.asset&&this.data.asset.votes&&(this.data.asset.votes=t),this}getStruct(){var t=super.getStruct();return t.amount=this.data.amount,t.recipientId=this.data.recipientId,t.asset=this.data.asset,t}instance(){return this}}class ko{static applyV1Compatibility(t){t.secondSignature=t.secondSignature||t.signSignature,t.typeGroup=Yn.Core,t.type===Wn.Vote&&t.senderPublicKey?t.recipientId=On.fromPublicKey(t.senderPublicKey,t.network):t.type===Wn.MultiSignature&&t.asset&&t.asset.multiSignatureLegacy&&(t.asset.multiSignatureLegacy.keysgroup=t.asset.multiSignatureLegacy.keysgroup.map(t=>t.startsWith("+")?t:"+".concat(t)))}static deserialize(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=this.getByteBuffer(t);this.deserializeCommon(r,n);var i=Li.create(r);if(this.deserializeVendorField(i,n),i.deserialize(n),this.deserializeSignatures(r,n),r.version){if(!(e.acceptLegacyVersion||e.disableVersionCheck||ai(r.version)))throw new on(r.version);1===r.version&&this.applyV1Compatibility(r)}return i.serialized=n.flip().toBuffer(),i}static deserializeCommon(t,e){e.skip(1),t.version=e.readUint8(),t.network=e.readUint8(),1===t.version?(t.type=e.readUint8(),t.timestamp=e.readUint32()):(t.typeGroup=e.readUint32(),t.type=e.readUint16(),t.nonce=A.make(e.readUint64().toString())),t.senderPublicKey=e.readBytes(33).toString("hex"),t.fee=A.make(e.readUint64().toString()),t.amount=A.ZERO}static deserializeVendorField(t,e){var r=e.readUint8();if(r>0)if(t.hasVendorField()){var n=e.readBytes(r).toBuffer();t.data.vendorField=n.toString("utf8")}else e.skip(r)}static deserializeSignatures(t,e){1===t.version?this.deserializeECDSA(t,e):this.deserializeSchnorrOrECDSA(t,e)}static deserializeSchnorrOrECDSA(t,e){this.detectSchnorr(e)?this.deserializeSchnorr(t,e):this.deserializeECDSA(t,e)}static deserializeECDSA(t,e){var r=()=>{e.mark();var t=e.skip(1).readBytes(1).toString("hex");return e.reset(),parseInt(t,16)+2};if(e.remaining()){var n=r();t.signature=e.readBytes(n).toString("hex")}var i=()=>{e.mark();var t=e.readUint8();return e.reset(),255===t};if(e.remaining()&&!i()){var o=r();t.secondSignature=e.readBytes(o).toString("hex")}if(e.remaining()&&i()){e.skip(1);var a=e.readBytes(e.limit-e.offset).toString("hex");t.signatures=[a]}if(e.remaining())throw new rn("signature buffer not exhausted")}static deserializeSchnorr(t,e){var r=()=>e.remaining()&&(e.remaining()%64==0||e.remaining()%65!=0);if(r()&&(t.signature=e.readBytes(64).toString("hex")),r()&&(t.secondSignature=e.readBytes(64).toString("hex")),e.remaining()){if(e.remaining()%65!=0)throw new rn("signature buffer not exhausted");t.signatures=[];for(var n=e.remaining()/65,i={},o=0;o<n;o++){var a=e.readBytes(65).toString("hex"),s=parseInt(a.slice(0,2),16);if(i[s])throw new vn;i[s]=!0,t.signatures.push(a)}}}static detectSchnorr(t){var e=t.remaining();return 64===e||128===e||(e%65==0||((e-64)%65==0||(e-128)%65==0))}static getByteBuffer(t){t instanceof H||(t=H.from(t,"hex"));var e=new T(t.length,!0);return e.append(t),e.reset(),e}}function Oo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}class Po{static fromHex(t){return this.fromSerialized(t)}static fromBytes(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.fromSerialized(t.toString("hex"),e,r)}static fromBytesUnsafe(t,e){try{var r={acceptLegacyVersion:!0},n=ko.deserialize(t,r);return n.data.id=e||Di.getId(n.data,r),n.isVerified=!0,n}catch(t){throw new rn(t.message)}}static fromJson(t){var e=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oo(Object(r),!0).forEach((function(e){ui(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t);return e.amount=A.make(e.amount),e.fee=A.make(e.fee),this.fromData(e)}static fromData(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{value:n,error:i}=Ki.verifySchema(t,e);if(i&&!ri(n))throw new nn(i);var o=Li.create(n),{version:a}=o.data;return 1===a&&ko.applyV1Compatibility(o.data),Ni.serialize(o),this.fromBytes(o.serialized,e,r)}static fromSerialized(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var n=ko.deserialize(t,r);n.data.id=Di.getId(n.data,r);var{value:i,error:o}=Ki.verifySchema(n.data,e);if(o&&!ri(i))throw new nn(o);return n.isVerified=n.verify(r),n}catch(o){if(o instanceof on||o instanceof nn||o instanceof vn)throw o;throw new rn(o.message)}}}var To=new class{constructor(){this.transactionTypes=new Map,Li.initialize(this.transactionTypes),this.registerTransactionType(qi),this.registerTransactionType(Zi),this.registerTransactionType($i),this.registerTransactionType(Ji),this.registerTransactionType(Gi),this.registerTransactionType(Xi),this.registerTransactionType(Vi),this.registerTransactionType(Qi),this.registerTransactionType(Wi),this.registerTransactionType(to),this.registerTransactionType(eo),this.registerTransactionType(ro),this.registerTransactionType(no),this.registerTransactionType(io),this.registerTransactionType(oo),this.registerTransactionType(ao)}registerTransactionType(t){var e,{typeGroup:r,type:n}=t;if(void 0===n||void 0===r)throw new Error;var i=zi.from(n,r);for(var o of this.transactionTypes.values())if(o.size){var a=[...o.values()][0];if(a.key===t.key&&zi.from(a.type,a.typeGroup)!==i)throw new un(a.key);for(var s of o.values())if(s===t)throw new sn(t.name)}if(this.transactionTypes.has(i)){if(null===(e=this.transactionTypes.get(i))||void 0===e?void 0:e.has(t.version))throw new cn(t.name,t.version)}else this.transactionTypes.set(i,new Map);this.transactionTypes.get(i).set(t.version,t),this.updateSchemas(t)}deregisterTransactionType(t){var{typeGroup:e,type:r,version:n}=t;if(void 0===r||void 0===e)throw new Error;var i=zi.from(r,e);if(!this.transactionTypes.has(i))throw new an(i.toString());this.updateSchemas(t,!0);var o=this.transactionTypes.get(i);if(!o.has(n))throw new an(i.toString());o.delete(n),0===o.size&&this.transactionTypes.delete(i)}updateSchemas(t,e){Ci.extendTransaction(t.getSchema(),e)}},Bo=Object.freeze({__proto__:null,TransactionRegistry:To,TransactionBuilder:lo,BuilderFactory:class{static transfer(){return new Ao}static secondSignature(){return new Eo}static delegateRegistration(){return new ho}static vote(){return new xo}static multiSignature(){return new So}static ipfs(){return new bo}static multiPayment(){return new wo}static delegateResignation(){return new yo}static htlcLock(){return new mo}static htlcClaim(){return new go}static htlcRefund(){return new vo}},Deserializer:ko,TransactionFactory:Po,Serializer:Ni,Signer:co,One:Yi,schemas:Bi,Two:so,Transaction:Hi,TransactionTypeFactory:Li,InternalTransactionType:zi,Utils:Di,Verifier:Ki});class Io{static size(t){var e=this.headerSize(t.data)+t.data.blockSignature.length/2;for(var r of t.transactions)e+=4+r.serialized.length;return e}static serializeWithTransactions(t){var e=t.transactions||[];t.numberOfTransactions=t.numberOfTransactions||e.length;for(var r=this.serialize(t),n=new T(r.length+4*e.length,!0).append(r).skip(4*e.length),i=0;i<e.length;i++){var o=Di.toBytes(e[i]);n.writeUint32(o.length,r.length+4*i),n.append(o)}return n.flip().toBuffer()}static serialize(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new T(512,!0);return this.serializeHeader(t,r),e&&this.serializeSignature(t,r),r.flip().toBuffer()}static headerSize(t){return 12+(Sn.getMilestone(t.height-1||1).block.idFullSha256?32:8)+4+8+8+8+4+t.payloadHash.length/2+t.generatorPublicKey.length/2}static serializeHeader(t,e){if(Sn.getMilestone(t.height-1||1).block.idFullSha256){if(64!==t.previousBlock.length)throw new yn(t.height,t.previousBlock);t.previousBlockHex=t.previousBlock}else t.previousBlockHex=jo.toBytesHex(t.previousBlock);e.writeUint32(t.version),e.writeUint32(t.timestamp),e.writeUint32(t.height),e.append(t.previousBlockHex,"hex"),e.writeUint32(t.numberOfTransactions),e.writeUint64(t.totalAmount.toString()),e.writeUint64(t.totalFee.toString()),e.writeUint64(t.reward.toString()),e.writeUint32(t.payloadLength),e.append(t.payloadHash,"hex"),e.append(t.generatorPublicKey,"hex"),Rr.strictEqual(e.offset,this.headerSize(t))}static serializeSignature(t,e){t.blockSignature&&e.append(t.blockSignature,"hex")}}class jo{constructor(t){var{data:e,transactions:r,id:n}=t;this.data=e,1===this.data.height&&(n?this.applyGenesisBlockFix(n):e.id&&this.applyGenesisBlockFix(e.id)),this.transactions=r.map((t,e)=>(t.data.blockId=this.data.id,t.data.blockHeight=this.data.height,t.data.sequence=e,t.timestamp=this.data.timestamp,t)),delete this.data.transactions,this.verification=this.verify();var{wrongTransactionOrder:i}=Sn.get("exceptions");if(this.data.id&&i&&i[this.data.id]){var o=i[this.data.id];this.transactions=o.map(t=>this.transactions.find(e=>e.id===t))}}static applySchema(t){var e=Ci.validate("block",t);if(!e.error)return e.value;if(!(e=Ci.validateException("block",t)).errors)return e.value;for(var r of e.errors){var n=!1,i=r.dataPath.match(/\.transactions\[([0-9]+)\]/);if(null===i)ri(t)||(n=!0);else{var o=i[1];if(t.transactions){var a=t.transactions[o];void 0!==a.id&&ri(a)||(n=!0)}}if(n)throw new dn(t.height,"Invalid data".concat(r.dataPath?" at "+r.dataPath:"",": ")+"".concat(r.message,": ").concat(JSON.stringify(r.data)))}return e.value}static getIdHex(t){var e=Sn.getMilestone(t.height),r=Io.serialize(t),n=_n.sha256(r);if(e.block.idFullSha256)return n.toString("hex");for(var i=H.alloc(8),o=0;o<8;o++)i[o]=n[7-o];return i.toString("hex")}static toBytesHex(t){var e=t?A.make(t).toString(16):"";return"0".repeat(16-e.length)+e}static getId(t){var e=Sn.getMilestone(t.height),r=jo.getIdHex(t);return e.block.idFullSha256?r:A.make("0x".concat(r)).toString()}getHeader(){var t=Object.assign({},this.data);return delete t.transactions,t}verifySignature(){var t=Io.serialize(this.data,!1),e=_n.sha256(t);if(!this.data.blockSignature)throw new Error;return Cn.verifyECDSA(e,this.data.blockSignature,this.data.generatorPublicKey)}toJson(){var t=JSON.parse(JSON.stringify(this.data));return t.reward=this.data.reward.toString(),t.totalAmount=this.data.totalAmount.toString(),t.totalFee=this.data.totalFee.toString(),t.transactions=this.transactions.map(t=>t.toJson()),t}verify(){var t=this.data,e={verified:!1,containsMultiSignatures:!1,errors:[]};try{var r=Sn.getMilestone(t.height);1!==t.height&&(t.previousBlock||e.errors.push("Invalid previous block")),t.reward.isEqualTo(r.reward)||e.errors.push(["Invalid block reward:",t.reward,"expected:",r.reward].join(" ")),this.verifySignature()||e.errors.push("Failed to verify block signature"),t.version!==r.block.version&&e.errors.push("Invalid block version"),t.timestamp>Nn.getTime()+Sn.getMilestone(t.height).blocktime&&e.errors.push("Invalid block timestamp");var n=Io.size(this);n>r.block.maxPayload&&e.errors.push("Payload is too large: ".concat(n," > ").concat(r.block.maxPayload));var i=this.transactions.filter(t=>!t.verified);if(i.length>0){for(var o of(e.errors.push("One or more transactions are not verified:"),i))e.errors.push("=> ".concat(o.serialized.toString("hex")));e.containsMultiSignatures=i.some(t=>!!t.data.signatures)}this.transactions.length!==t.numberOfTransactions&&e.errors.push("Invalid number of transactions"),this.transactions.length>r.block.maxTransactions&&t.height>1&&e.errors.push("Transactions length is too high");var a={},s=A.ZERO,u=A.ZERO,c=[];for(var f of this.transactions){if(!f.data||!f.data.id)throw new Error;var p=H.from(f.data.id,"hex");if(a[f.data.id]&&e.errors.push("Encountered duplicate transaction: ".concat(f.data.id)),f.data.expiration&&f.data.expiration>0&&f.data.expiration<=this.data.height)"devnet"===Sn.get("network.name")&&r.ignoreExpiredTransactions||e.errors.push("Encountered expired transaction: ".concat(f.data.id));if(1===f.data.version&&!r.block.acceptExpiredTransactionTimestamps){var l=t.timestamp;f.data.timestamp>l+3600+r.blocktime?e.errors.push("Encountered future transaction: ".concat(f.data.id)):l-f.data.timestamp>21600&&e.errors.push("Encountered expired transaction: ".concat(f.data.id))}a[f.data.id]=f.data,s=s.plus(f.data.amount),u=u.plus(f.data.fee),c.push(p)}s.isEqualTo(t.totalAmount)||e.errors.push("Invalid total amount"),u.isEqualTo(t.totalFee)||e.errors.push("Invalid total fee"),_n.sha256(c).toString("hex")!==t.payloadHash&&e.errors.push("Invalid payload hash")}catch(t){e.errors.push(t)}return e.verified=0===e.errors.length,e}applyGenesisBlockFix(t){this.data.id=t,this.data.idHex=64===t.length?t:jo.toBytesHex(t)}}class Uo{static deserialize(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={},i=[],o=new T(t.length,!0);o.append(t),o.reset(),this.deserializeHeader(n,o),(e=e||0===o.remaining())||(i=this.deserializeTransactions(n,o,r.deserializeTransactionsUnchecked)),n.idHex=jo.getIdHex(n),n.id=jo.getId(n);var{outlookTable:a}=Sn.get("exceptions");a&&a[n.id]&&(Sn.getMilestone(n.height).block.idFullSha256?(n.id=a[n.id],n.idHex=n.id):(n.id=a[n.id],n.idHex=jo.toBytesHex(n.id)));return{data:n,transactions:i}}static deserializeHeader(t,e){if(t.version=e.readUint32(),t.timestamp=e.readUint32(),t.height=e.readUint32(),Sn.getMilestone(t.height-1||1).block.idFullSha256){var r=e.readBytes(32).toString("hex");t.previousBlockHex=r,t.previousBlock=r}else t.previousBlockHex=e.readBytes(8).toString("hex"),t.previousBlock=A.make("0x".concat(t.previousBlockHex)).toString();t.numberOfTransactions=e.readUint32(),t.totalAmount=A.make(e.readUint64().toString()),t.totalFee=A.make(e.readUint64().toString()),t.reward=A.make(e.readUint64().toString()),t.payloadLength=e.readUint32(),t.payloadHash=e.readBytes(32).toString("hex"),t.generatorPublicKey=e.readBytes(33).toString("hex");t.blockSignature=e.readBytes((()=>{e.mark();var t=e.skip(1).readBytes(1).toString("hex");return e.reset(),parseInt(t,16)+2})()).toString("hex")}static deserializeTransactions(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[],i=0;i<t.numberOfTransactions;i++)n.push(e.readUint32());var o=[];for(var a of(t.transactions=[],n)){var s=e.readBytes(a).toBuffer(),u=r?Po.fromBytesUnsafe(s):Po.fromBytes(s);o.push(u),t.transactions.push(u.data)}return o}}function Mo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ro(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mo(Object(r),!0).forEach((function(e){ui(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Fo=Object.freeze({__proto__:null,Block:jo,Deserializer:Uo,BlockFactory:class{static make(t,e){t.generatorPublicKey=e.publicKey;var r=Io.serialize(t,!1),n=_n.sha256(r);return t.blockSignature=Cn.signECDSA(n,e),t.id=jo.getId(t),this.fromData(t)}static fromHex(t){return this.fromSerialized(H.from(t,"hex"))}static fromBytes(t){return this.fromSerialized(t)}static fromJson(t){var e=Ro({},t);if(e.totalAmount=A.make(e.totalAmount),e.totalFee=A.make(e.totalFee),e.reward=A.make(e.reward),e.transactions)for(var r of e.transactions)r.amount=A.make(r.amount),r.fee=A.make(r.fee);return this.fromData(e)}static fromData(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(jo.applySchema(t)){var r=Io.serializeWithTransactions(t),n=new jo(Ro(Ro({},Uo.deserialize(r,!1,e)),{},{id:t.id}));return n.serialized=r.toString("hex"),n}}static fromSerialized(t){var e=Uo.deserialize(t),r=jo.applySchema(e.data);r&&(e.data=r);var n=new jo(e);return n.serialized=t.toString("hex"),n}},Serializer:Io}),Co=Object.freeze({__proto__:null}),_o=Object.freeze({__proto__:null});export{Fo as Blocks,Hn as Constants,Kn as Crypto,ci as Enums,bn as Errors,Tn as Identities,Co as Interfaces,En as Managers,wn as Networks,Bo as Transactions,_o as Types,si as Utils,_i as Validation};
